module.exports=[3130,a=>{"use strict";var b=a.i(87924),c=a.i(97895);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card",className:(0,c.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...d})}function e({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-header",className:(0,c.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...d})}function f({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-title",className:(0,c.cn)("leading-none font-semibold",a),...d})}function g({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-description",className:(0,c.cn)("text-muted-foreground text-sm",a),...d})}function h({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-content",className:(0,c.cn)("px-6",a),...d})}a.s(["Card",()=>d,"CardContent",()=>h,"CardDescription",()=>g,"CardHeader",()=>e,"CardTitle",()=>f])},96221,a=>{"use strict";let b=(0,a.i(70106).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);a.s(["Loader2",()=>b],96221)},5522,a=>{"use strict";var b=a.i(87924),c=a.i(97895);function d({className:a,type:d,...e}){return(0,b.jsx)("input",{type:d,"data-slot":"input",className:(0,c.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",a),...e})}a.s(["Input",()=>d])},80281,41675,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(7554),e=a.i(70121),f=a.i(50104),g=a.i(25152),h=a.i(77994),i=a.i(3688),j=a.i(30553),k="Switch",[l,m]=(0,f.createContextScope)(k),[n,o]=l(k),p=c.forwardRef((a,f)=>{let{__scopeSwitch:h,name:i,checked:k,defaultChecked:l,required:m,disabled:o,value:p="on",onCheckedChange:q,form:r,...u}=a,[v,w]=c.useState(null),x=(0,e.useComposedRefs)(f,a=>w(a)),y=c.useRef(!1),z=!v||r||!!v.closest("form"),[A=!1,B]=(0,g.useControllableState)({prop:k,defaultProp:l,onChange:q});return(0,b.jsxs)(n,{scope:h,checked:A,disabled:o,children:[(0,b.jsx)(j.Primitive.button,{type:"button",role:"switch","aria-checked":A,"aria-required":m,"data-state":t(A),"data-disabled":o?"":void 0,disabled:o,value:p,...u,ref:x,onClick:(0,d.composeEventHandlers)(a.onClick,a=>{B(a=>!a),z&&(y.current=a.isPropagationStopped(),y.current||a.stopPropagation())})}),z&&(0,b.jsx)(s,{control:v,bubbles:!y.current,name:i,value:p,checked:A,required:m,disabled:o,form:r,style:{transform:"translateX(-100%)"}})]})});p.displayName=k;var q="SwitchThumb",r=c.forwardRef((a,c)=>{let{__scopeSwitch:d,...e}=a,f=o(q,d);return(0,b.jsx)(j.Primitive.span,{"data-state":t(f.checked),"data-disabled":f.disabled?"":void 0,...e,ref:c})});r.displayName=q;var s=a=>{let{control:d,checked:e,bubbles:f=!0,...g}=a,j=c.useRef(null),k=(0,h.usePrevious)(e),l=(0,i.useSize)(d);return c.useEffect(()=>{let a=j.current,b=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(k!==e&&b){let c=new Event("click",{bubbles:f});b.call(a,e),a.dispatchEvent(c)}},[k,e,f]),(0,b.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:e,...g,tabIndex:-1,ref:j,style:{...a.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function t(a){return a?"checked":"unchecked"}var u=a.i(97895);function v({className:a,...c}){return(0,b.jsx)(p,{"data-slot":"switch",className:(0,u.cn)("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",a),...c,children:(0,b.jsx)(r,{"data-slot":"switch-thumb",className:"bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0"})})}a.s(["Switch",()=>v],80281);let w=(0,a.i(70106).default)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);a.s(["Calendar",()=>w],41675)},75413,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(3130),e=a.i(40695),f=a.i(5522),g=a.i(17171),h=a.i(97895);function i({className:a,...c}){return(0,b.jsx)("textarea",{"data-slot":"textarea",className:(0,h.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),...c})}var j=a.i(87682),k=a.i(80281),l=a.i(77687),m=a.i(4860),n=a.i(59165);let o=(0,a.i(70106).default)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);var p=a.i(41675),q=a.i(96221);function r(){let{toast:a}=(0,l.useToast)(),[h,r]=(0,c.useState)([]),[s,t]=(0,c.useState)(!0),[u,v]=(0,c.useState)(!1),[w,x]=(0,c.useState)(""),[y,z]=(0,c.useState)(!0),[A,B]=(0,c.useState)(""),[C,D]=(0,c.useState)(""),[E,F]=(0,c.useState)("#E11D48"),[G,H]=(0,c.useState)(""),[I,J]=(0,c.useState)(""),[K,L]=(0,c.useState)(""),[M,N]=(0,c.useState)("");(0,c.useEffect)(()=>{(async()=>{try{if(!localStorage.getItem("selected_guild"))return;console.log("[v0] Fetching text channels via command queue...");let{status:b,result:c}=await (0,m.sendCommand)("listTextChannels",{});"done"===b&&c?.ok&&c?.channels?(console.log("[v0] Text channels loaded:",c.channels),r(c.channels),c.channels.length>0&&J(c.channels[0].id)):(console.error("[v0] Failed to load channels:",c),a({title:"Erreur",description:"Impossible de charger les salons",variant:"destructive"}))}catch(b){console.error("[v0] Error loading channels:",b),a({title:"Erreur",description:"Impossible de charger les salons",variant:"destructive"})}finally{t(!1)}})()},[a]);let O=async()=>{v(!0),a({title:"Annonce",description:"Commande envoyÃ©e..."});try{let{status:b,result:c}=await (0,m.sendCommand)("announce",{channelId:I,message:y?null:w,embed:y?{title:A,description:C,color:E,image:G}:null});"done"===b&&c?.ok?(a({title:"SuccÃ¨s",description:"Annonce publiÃ©e"}),x(""),B(""),D(""),H("")):a({title:"Erreur",description:c?.reason||"Impossible de publier l'annonce",variant:"destructive"})}catch(b){a({title:"Erreur",description:"Impossible de publier l'annonce",variant:"destructive"})}finally{v(!1)}},P=async()=>{if(!K||!M)return void a({title:"Erreur",description:"Veuillez sÃ©lectionner une date et heure",variant:"destructive"});v(!0),a({title:"Programmation",description:"Commande envoyÃ©e..."});try{let{status:b,result:c}=await (0,m.sendCommand)("schedule_announce",{channelId:I,message:y?null:w,embed:y?{title:A,description:C,color:E,image:G}:null,scheduledFor:`${K}T${M}`});"done"===b&&c?.ok?(a({title:"SuccÃ¨s",description:`Annonce programm\xe9e pour ${K} \xe0 ${M}`}),x(""),B(""),D(""),H(""),L(""),N("")):a({title:"Erreur",description:c?.reason||"Impossible de programmer l'annonce",variant:"destructive"})}catch(b){a({title:"Erreur",description:"Impossible de programmer l'annonce",variant:"destructive"})}finally{v(!1)}};return s?(0,b.jsx)("div",{className:"flex h-96 items-center justify-center",children:(0,b.jsx)("p",{className:"text-muted-foreground",children:"Chargement..."})}):(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"Annonces"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"CrÃ©er et programmer des annonces"})]}),(0,b.jsxs)("div",{className:"grid gap-6 lg:grid-cols-2",children:[(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)(d.Card,{className:"border-border bg-card",children:[(0,b.jsx)(d.CardHeader,{children:(0,b.jsxs)(d.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(n.Megaphone,{className:"h-5 w-5"}),"Composer l'annonce"]})}),(0,b.jsxs)(d.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{children:"Salon de destination"}),(0,b.jsxs)(j.Select,{value:I,onValueChange:J,disabled:u,children:[(0,b.jsx)(j.SelectTrigger,{children:(0,b.jsx)(j.SelectValue,{placeholder:"SÃ©lectionnez un salon"})}),(0,b.jsx)(j.SelectContent,{children:h.map(a=>(0,b.jsxs)(j.SelectItem,{value:a.id,children:["#",a.name]},a.id))})]})]}),!y&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{children:"Message"}),(0,b.jsx)(i,{value:w,onChange:a=>x(a.target.value),placeholder:"Votre annonce...",rows:6,disabled:u})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(k.Switch,{checked:y,onCheckedChange:z,disabled:u}),(0,b.jsx)(g.Label,{children:"Utiliser un embed"})]}),y&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{children:"Titre de l'embed"}),(0,b.jsx)(f.Input,{value:A,onChange:a=>B(a.target.value),placeholder:"Titre de l'annonce",disabled:u})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{children:"Description"}),(0,b.jsx)(i,{value:C,onChange:a=>D(a.target.value),placeholder:"Contenu de l'annonce...",rows:6,disabled:u})]}),(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{children:"Couleur"}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(f.Input,{type:"color",value:E,onChange:a=>F(a.target.value),className:"h-10 w-20",disabled:u}),(0,b.jsx)(f.Input,{value:E,onChange:a=>F(a.target.value),placeholder:"#E11D48",disabled:u})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{children:"Image (URL)"}),(0,b.jsx)(f.Input,{value:G,onChange:a=>H(a.target.value),placeholder:"https://...",disabled:u})]})]})]})]})]}),(0,b.jsxs)(d.Card,{className:"border-border bg-card",children:[(0,b.jsxs)(d.CardHeader,{children:[(0,b.jsxs)(d.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(p.Calendar,{className:"h-5 w-5"}),"Programmer"]}),(0,b.jsx)(d.CardDescription,{children:"Planifier l'envoi de l'annonce"})]}),(0,b.jsxs)(d.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{children:"Date"}),(0,b.jsx)(f.Input,{type:"date",value:K,onChange:a=>L(a.target.value),disabled:u})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{children:"Heure"}),(0,b.jsx)(f.Input,{type:"time",value:M,onChange:a=>N(a.target.value),disabled:u})]})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)(e.Button,{onClick:O,disabled:!I||u,className:"flex-1 gap-2",children:[u?(0,b.jsx)(q.Loader2,{className:"h-4 w-4 animate-spin"}):(0,b.jsx)(o,{className:"h-4 w-4"}),"Envoyer maintenant"]}),(0,b.jsxs)(e.Button,{onClick:P,disabled:!I||u,variant:"outline",className:"flex-1 gap-2 bg-transparent",children:[u?(0,b.jsx)(q.Loader2,{className:"h-4 w-4 animate-spin"}):(0,b.jsx)(p.Calendar,{className:"h-4 w-4"}),"Programmer"]})]})]})]})]}),(0,b.jsxs)(d.Card,{className:"border-border bg-card",children:[(0,b.jsxs)(d.CardHeader,{children:[(0,b.jsx)(d.CardTitle,{children:"AperÃ§u"}),(0,b.jsx)(d.CardDescription,{children:"PrÃ©visualisation de l'annonce"})]}),(0,b.jsx)(d.CardContent,{children:y?(0,b.jsxs)("div",{className:"rounded-2xl border-l-4 bg-muted p-4",style:{borderLeftColor:E},children:[A&&(0,b.jsx)("h3",{className:"mb-2 text-lg font-bold",children:A}),C&&(0,b.jsx)("p",{className:"whitespace-pre-wrap text-sm text-muted-foreground",children:C}),!A&&!C&&(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Commencez Ã  Ã©crire pour voir l'aperÃ§u..."}),G&&(0,b.jsx)("div",{className:"mt-3 flex items-center gap-2 text-xs text-muted-foreground",children:(0,b.jsx)("span",{children:"ðŸ–¼ï¸ Image attachÃ©e"})})]}):(0,b.jsx)("div",{className:"rounded-2xl bg-muted p-4",children:(0,b.jsx)("p",{className:"whitespace-pre-wrap text-sm",children:w||"Commencez Ã  Ã©crire pour voir l'aperÃ§u..."})})})]})]})]})}a.s(["default",()=>r],75413)}];

//# sourceMappingURL=_f0cb594d._.js.map