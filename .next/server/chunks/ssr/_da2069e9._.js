module.exports=[7706,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50104),e=a.i(46872),f=a.i(72752),g=a.i(30553),h="Avatar",[i,j]=(0,d.createContextScope)(h),[k,l]=i(h),m=c.forwardRef((a,d)=>{let{__scopeAvatar:e,...f}=a,[h,i]=c.useState("idle");return(0,b.jsx)(k,{scope:e,imageLoadingStatus:h,onImageLoadingStatusChange:i,children:(0,b.jsx)(g.Primitive.span,{...f,ref:d})})});m.displayName=h;var n="AvatarImage",o=c.forwardRef((a,d)=>{let{__scopeAvatar:h,src:i,onLoadingStatusChange:j=()=>{},...k}=a,m=l(n,h),o=function(a,b){let[d,e]=c.useState("idle");return(0,f.useLayoutEffect)(()=>{if(!a)return void e("error");let c=!0,d=new window.Image,f=a=>()=>{c&&e(a)};return e("loading"),d.onload=f("loaded"),d.onerror=f("error"),d.src=a,b&&(d.referrerPolicy=b),()=>{c=!1}},[a,b]),d}(i,k.referrerPolicy),p=(0,e.useCallbackRef)(a=>{j(a),m.onImageLoadingStatusChange(a)});return(0,f.useLayoutEffect)(()=>{"idle"!==o&&p(o)},[o,p]),"loaded"===o?(0,b.jsx)(g.Primitive.img,{...k,ref:d,src:i}):null});o.displayName=n;var p="AvatarFallback",q=c.forwardRef((a,d)=>{let{__scopeAvatar:e,delayMs:f,...h}=a,i=l(p,e),[j,k]=c.useState(void 0===f);return c.useEffect(()=>{if(void 0!==f){let a=window.setTimeout(()=>k(!0),f);return()=>window.clearTimeout(a)}},[f]),j&&"loaded"!==i.imageLoadingStatus?(0,b.jsx)(g.Primitive.span,{...h,ref:d}):null});q.displayName=p;var r=a.i(97895);function s({className:a,...c}){return(0,b.jsx)(m,{"data-slot":"avatar",className:(0,r.cn)("relative flex size-8 shrink-0 overflow-hidden rounded-full",a),...c})}function t({className:a,...c}){return(0,b.jsx)(o,{"data-slot":"avatar-image",className:(0,r.cn)("aspect-square size-full",a),...c})}function u({className:a,...c}){return(0,b.jsx)(q,{"data-slot":"avatar-fallback",className:(0,r.cn)("bg-muted flex size-full items-center justify-center rounded-full",a),...c})}a.s(["Avatar",()=>s,"AvatarFallback",()=>u,"AvatarImage",()=>t],7706)},3130,a=>{"use strict";var b=a.i(87924),c=a.i(97895);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card",className:(0,c.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...d})}function e({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-header",className:(0,c.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...d})}function f({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-title",className:(0,c.cn)("leading-none font-semibold",a),...d})}function g({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-description",className:(0,c.cn)("text-muted-foreground text-sm",a),...d})}function h({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-content",className:(0,c.cn)("px-6",a),...d})}a.s(["Card",()=>d,"CardContent",()=>h,"CardDescription",()=>g,"CardHeader",()=>e,"CardTitle",()=>f])},96221,a=>{"use strict";let b=(0,a.i(70106).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);a.s(["Loader2",()=>b],96221)},40695,a=>{"use strict";var b=a.i(87924),c=a.i(11011),d=a.i(187),e=a.i(97895);let f=(0,d.cva)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function g({className:a,variant:d,size:g,asChild:h=!1,...i}){let j=h?c.Slot:"button";return(0,b.jsx)(j,{"data-slot":"button",className:(0,e.cn)(f({variant:d,size:g,className:a})),...i})}a.s(["Button",()=>g])},60246,a=>{"use strict";let b=(0,a.i(70106).default)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);a.s(["Users",()=>b],60246)},87319,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(71987),f=a.i(3130),g=a.i(40695),h=a.i(7706),i=a.i(96221),j=a.i(60246);function k(){let a=(0,d.useRouter)(),[k,l]=(0,c.useState)([]),[m,n]=(0,c.useState)(!0),[o,p]=(0,c.useState)(null);return((0,c.useEffect)(()=>{(async()=>{console.log("[v0] Fetching guilds from /api/guilds");try{let b=await fetch("/api/guilds");if(console.log("[v0] Response status:",b.status),!b.ok){if(401===b.status){console.log("[v0] Not authenticated, redirecting to home"),a.push("/");return}let c=await b.json();throw console.error("[v0] Error response:",c),Error(c.error||"Failed to fetch guilds")}let c=await b.json();console.log("[v0] Guilds received:",c.length),l(c)}catch(a){console.error("[v0] Fetch error:",a),p(a instanceof Error?a.message:"Une erreur est survenue")}finally{n(!1)}})()},[a]),m)?(0,b.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-background",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)(i.Loader2,{className:"mx-auto h-12 w-12 animate-spin text-primary"}),(0,b.jsx)("p",{className:"mt-4 text-muted-foreground",children:"Chargement de vos serveurs..."})]})}):o?(0,b.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-background",children:(0,b.jsx)(f.Card,{className:"w-full max-w-md border-destructive",children:(0,b.jsxs)(f.CardContent,{className:"p-6 text-center",children:[(0,b.jsx)("p",{className:"text-destructive",children:o}),(0,b.jsx)(g.Button,{className:"mt-4",onClick:()=>a.push("/"),children:"Retour"})]})})}):(0,b.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,b.jsx)("header",{className:"border-b border-border bg-card",children:(0,b.jsxs)("div",{className:"container mx-auto flex h-16 items-center gap-3 px-6",children:[(0,b.jsx)(e.default,{src:"/valoratbot-logo.png",alt:"Valoratbot",width:32,height:32,className:"h-8 w-8"}),(0,b.jsx)("span",{className:"text-xl font-bold text-foreground",children:"Valoratbot"})]})}),(0,b.jsxs)("main",{className:"container mx-auto px-6 py-12",children:[(0,b.jsxs)("div",{className:"mb-8 text-center",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"Sélectionnez un serveur"}),(0,b.jsx)("p",{className:"mt-2 text-muted-foreground",children:"Choisissez le serveur que vous souhaitez gérer"})]}),0===k.length?(0,b.jsx)(f.Card,{className:"mx-auto max-w-md",children:(0,b.jsxs)(f.CardContent,{className:"p-8 text-center",children:[(0,b.jsx)("p",{className:"text-muted-foreground",children:"Aucun serveur où le bot est présent. Invitez le bot à votre serveur pour commencer."}),(0,b.jsx)(g.Button,{className:"mt-4",onClick:()=>{window.location.href="https://discord.com/oauth2/authorize?client_id=1434827695799275613"},children:"Inviter le bot"})]})}):(0,b.jsx)("div",{className:"mx-auto grid max-w-4xl gap-4 md:grid-cols-2",children:k.map(c=>(0,b.jsx)(f.Card,{className:"cursor-pointer border-border bg-card transition-all hover:border-primary hover:shadow-lg",onClick:()=>{var b;return b=c.id,void(localStorage.setItem("selected_guild",b),a.push("/dashboard"))},children:(0,b.jsxs)(f.CardContent,{className:"flex items-center gap-4 p-6",children:[(0,b.jsxs)(h.Avatar,{className:"h-16 w-16",children:[(0,b.jsx)(h.AvatarImage,{src:c.icon?`https://cdn.discordapp.com/icons/${c.id}/${c.icon}.png`:"/placeholder.svg"}),(0,b.jsx)(h.AvatarFallback,{children:c.name[0]})]}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("h3",{className:"font-semibold text-foreground",children:c.name}),(0,b.jsxs)("p",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[(0,b.jsx)(j.Users,{className:"h-4 w-4"}),"Cliquez pour gérer"]})]})]})},c.id))})]})]})}a.s(["default",()=>k])}];

//# sourceMappingURL=_da2069e9._.js.map