(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,31343,e=>{"use strict";let t=(0,e.i(75254).default)("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);e.s(["Play",()=>t],31343)},27612,e=>{"use strict";let t=(0,e.i(75254).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);e.s(["Trash2",()=>t],27612)},77486,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(70065),i=e.i(67881),l=e.i(23750),r=e.i(10708),n=e.i(62870),c=e.i(20682),d=e.i(50544),o=e.i(31343),u=e.i(75254);let m=(0,u.default)("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]),h=(0,u.default)("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]),x=(0,u.default)("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),p=(0,u.default)("Music2",[["circle",{cx:"8",cy:"18",r:"4",key:"1fc0mg"}],["path",{d:"M12 18V2l7 4",key:"g04rme"}]]);var g=e.i(31278),j=e.i(27612);function y(){let{toast:e}=(0,c.useToast)(),[u,y]=(0,s.useState)(!1),[f,v]=(0,s.useState)(null),[b,N]=(0,s.useState)([]),[w,C]=(0,s.useState)(!1),[k,S]=(0,s.useState)([]),[P,T]=(0,s.useState)(""),[I,z]=(0,s.useState)(""),L=(0,s.useCallback)(async()=>{let{status:e,result:t}=await (0,d.sendCommand)("listVoiceChannels");if("done"===e&&t?.ok){let e=(t.channels||[]).map(e=>({id:String(e.id),name:String(e.name)}));S(e),e.length&&!P&&T(e[0].id)}},[P]),B=(0,s.useCallback)(async()=>{let{status:e,result:t}=await (0,d.sendCommand)("getQueue");"done"===e&&t?.ok&&(N((t.queue||[]).map((e,t)=>({id:String(t),title:String(e.title||"Unknown"),artist:String(e.author||""),duration:function(e){if(!e&&0!==e)return"";let t=Math.floor(e/1e3),s=Math.floor(t/60),a=String(t%60).padStart(2,"0");return`${s}:${a}`}("number"==typeof e.length?e.length:void 0),thumbnail:e.artworkUrl||null}))),t.nowPlaying?v({title:String(t.nowPlaying.title||"Unknown"),artist:String(t.nowPlaying.author||""),thumbnail:t.nowPlaying.artworkUrl||null}):v(null),y(!!t.nowPlaying))},[]);(0,s.useEffect)(()=>{L(),B()},[L,B]),(0,s.useEffect)(()=>{let e=setInterval(()=>{B().catch(()=>{})},5e3);return()=>clearInterval(e)},[B]);let E=async()=>{if(!I||!P)return void e({title:"Erreur",description:"Veuillez saisir une URL/recherche et sÃ©lectionner un salon vocal",variant:"destructive"});C(!0),e({title:"Play",description:"Commande envoyÃ©e..."});try{let{status:t,result:s}=await (0,d.sendCommand)("play",{voiceChannelId:P,query:I});"done"===t&&s?.ok?(y(!0),await B(),e({title:"SuccÃ¨s",description:"Lecture dÃ©marrÃ©e"}),z("")):e({title:"Erreur",description:s?.reason||"Impossible de lire la musique",variant:"destructive"})}catch{e({title:"Erreur",description:"Impossible de lire la musique",variant:"destructive"})}finally{C(!1)}},U=async t=>{C(!0),e({title:t.charAt(0).toUpperCase()+t.slice(1),description:"Commande envoyÃ©e..."});try{let{status:s,result:a}=await (0,d.sendCommand)(t);"done"===s&&a?.ok?("pause"===t&&y(!1),"resume"===t&&y(!0),"stop"===t&&y(!1),await B(),e({title:"SuccÃ¨s",description:`${t} effectu\xe9`})):e({title:"Erreur",description:a?.reason||"Action Ã©chouÃ©e",variant:"destructive"})}catch{e({title:"Erreur",description:`Impossible d'effectuer ${t}`,variant:"destructive"})}finally{C(!1)}},q=async t=>{try{let{status:s,result:a}=await (0,d.sendCommand)("removeFromQueue",{trackId:t});"done"===s&&a?.ok?(await B(),e({title:"RetirÃ©",description:"Piste retirÃ©e de la file"})):e({title:"Erreur",description:a?.reason||"Impossible de retirer la piste",variant:"destructive"})}catch{e({title:"Erreur",description:"Impossible de retirer la piste",variant:"destructive"})}};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"Musique"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"ContrÃ´lez la lecture de musique"})]}),(0,t.jsxs)(a.Card,{className:"border-border bg-card",children:[(0,t.jsxs)(a.CardHeader,{children:[(0,t.jsxs)(a.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(o.Play,{className:"h-5 w-5"}),"Jouer de la musique"]}),(0,t.jsx)(a.CardDescription,{children:"Ajouter une piste Ã  la file d'attente"})]}),(0,t.jsxs)(a.CardContent,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(r.Label,{children:"Salon vocal"}),(0,t.jsxs)(n.Select,{value:P,onValueChange:T,disabled:w||!k.length,children:[(0,t.jsx)(n.SelectTrigger,{children:(0,t.jsx)(n.SelectValue,{placeholder:k.length?"SÃ©lectionnez un salon vocal":"Aucun salon vocal"})}),(0,t.jsx)(n.SelectContent,{children:k.map(e=>(0,t.jsxs)(n.SelectItem,{value:e.id,children:["ðŸ”Š ",e.name]},e.id))})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(r.Label,{children:"URL ou recherche"}),(0,t.jsx)(l.Input,{placeholder:"https://youtube.com/... ou nom de musique",value:I,onChange:e=>z(e.target.value),disabled:w})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(i.Button,{onClick:E,className:"gap-2",disabled:w||!P||!I,children:[w?(0,t.jsx)(g.Loader2,{className:"h-4 w-4 animate-spin"}):(0,t.jsx)(o.Play,{className:"h-4 w-4"}),"Jouer"]}),(0,t.jsxs)(i.Button,{variant:"outline",className:"gap-2",onClick:()=>{L(),B()},disabled:w,children:[(0,t.jsx)(g.Loader2,{className:"h-4 w-4"}),"RafraÃ®chir"]})]})]})]}),(0,t.jsxs)(a.Card,{className:"border-border bg-card",children:[(0,t.jsx)(a.CardHeader,{children:(0,t.jsxs)(a.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(p,{className:"h-5 w-5"}),"ContrÃ´les"]})}),(0,t.jsxs)(a.CardContent,{children:[(0,t.jsx)("div",{className:"mb-4 flex flex-col items-center text-center",children:f?(0,t.jsxs)(t.Fragment,{children:[f.thumbnail&&(0,t.jsx)("img",{src:f.thumbnail||"/placeholder.svg",alt:"",className:"mb-2 h-14 w-14 rounded-md object-cover"}),(0,t.jsx)("p",{className:"max-w-[90%] truncate text-base font-semibold",children:f.title}),(0,t.jsx)("p",{className:"max-w-[90%] truncate text-sm text-muted-foreground",children:f.artist})]}):(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Rien en cours de lecture"})}),(0,t.jsxs)("div",{className:"flex flex-wrap justify-center gap-2",children:[(0,t.jsxs)(i.Button,{onClick:()=>U("resume"),size:"lg",className:"gap-2",disabled:w,children:[w?(0,t.jsx)(g.Loader2,{className:"h-5 w-5 animate-spin"}):(0,t.jsx)(o.Play,{className:"h-5 w-5"}),"Play"]}),(0,t.jsxs)(i.Button,{onClick:()=>U("pause"),size:"lg",variant:"outline",className:"gap-2",disabled:w,children:[w?(0,t.jsx)(g.Loader2,{className:"h-5 w-5 animate-spin"}):(0,t.jsx)(m,{className:"h-5 w-5"}),"Pause"]}),(0,t.jsxs)(i.Button,{onClick:()=>U("skip"),size:"lg",variant:"outline",className:"gap-2",disabled:w,children:[(0,t.jsx)(h,{className:"h-5 w-5"}),"Skip"]}),(0,t.jsxs)(i.Button,{onClick:()=>U("stop"),size:"lg",variant:"outline",className:"gap-2",disabled:w,children:[(0,t.jsx)(x,{className:"h-5 w-5"}),"Stop"]})]})]})]}),(0,t.jsxs)(a.Card,{className:"border-border bg-card",children:[(0,t.jsxs)(a.CardHeader,{children:[(0,t.jsx)(a.CardTitle,{children:"File d'attente"}),(0,t.jsxs)(a.CardDescription,{children:[b.length," ",1===b.length?"piste":"pistes"," en attente"]})]}),(0,t.jsx)(a.CardContent,{children:0===b.length?(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center rounded-2xl bg-muted p-12 text-center",children:[(0,t.jsx)(p,{className:"mb-4 h-12 w-12 text-muted-foreground"}),(0,t.jsx)("p",{className:"text-lg font-medium",children:"Aucune piste en attente"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Les pistes ajoutÃ©es apparaÃ®tront ici"})]}):(0,t.jsx)("div",{className:"space-y-2",children:b.map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center gap-3 rounded-lg bg-muted p-3",children:[(0,t.jsx)("div",{className:"flex h-10 w-10 items-center justify-center overflow-hidden rounded-lg bg-primary/10",children:e.thumbnail?(0,t.jsx)("img",{src:e.thumbnail||"/placeholder.svg",alt:"",className:"h-10 w-10 object-cover"}):(0,t.jsx)(p,{className:"h-5 w-5 text-primary"})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{className:"font-medium",children:e.title}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:[e.artist," ",e.duration?`â€¢ ${e.duration}`:""]})]}),(0,t.jsx)(i.Button,{size:"icon",variant:"ghost",onClick:()=>q(s),children:(0,t.jsx)(j.Trash2,{className:"h-4 w-4 text-muted-foreground"})})]},`${e.id}-${s}`))})})]})]})}e.s(["default",()=>y],77486)}]);