(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,32986,e=>{"use strict";var a=e.i(47167),s=e.i(43476),t=e.i(71645),r=e.i(70065),l=e.i(27341),n=e.i(94179),i=e.i(67881),d=e.i(87336),o=e.i(23750),c=e.i(66551),m=e.i(31278),x=e.i(61911),u=e.i(3116),h=e.i(52754),p=e.i(67240),b=e.i(24632),j=e.i(30536);function g(e){return e.toLocaleString("fr-FR")}function f(e){let a=Math.max(1,Math.floor((Date.now()-new Date(e).getTime())/1e3));if(a<60)return`${a}s`;let s=Math.floor(a/60);if(s<60)return`${s}m`;let t=Math.floor(s/60);return t<24?`${t}h`:`${Math.floor(t/24)}j`}let N=[0,32,15,19,4,21,2,25,17,34,6,27,13,36,11,30,8,23,10,5,24,16,33,1,20,14,31,9,22,18,29,7,28,12,35,3,26],v=new Set([1,3,5,7,9,12,14,16,18,19,21,23,25,27,30,32,34,36]);function w(e){return"â™¥"===e||"â™¦"===e?"text-red-500":"text-foreground"}function y({card:e,hidden:a=!1,delay:r=0}){let[l,n]=(0,t.useState)(0===r);return((0,t.useEffect)(()=>{if(r>0){let e=setTimeout(()=>n(!0),r);return()=>clearTimeout(e)}},[r]),l)?a||"?"===e.rank?(0,s.jsx)("div",{className:"w-20 h-28 rounded-xl bg-gradient-to-br from-primary to-primary/80 border-2 border-primary/30 flex items-center justify-center shadow-lg shadow-primary/10 transition-all duration-300",children:(0,s.jsx)("span",{className:"text-2xl font-bold text-primary-foreground/50",children:"?"})}):(0,s.jsxs)("div",{className:"w-20 h-28 rounded-xl bg-card border-2 border-border flex flex-col items-center justify-center shadow-lg transition-all duration-300 hover:scale-105 hover:shadow-xl",children:[(0,s.jsx)("span",{className:`text-xl font-bold ${w(e.suit)}`,children:e.rank}),(0,s.jsx)("span",{className:`text-2xl ${w(e.suit)}`,children:e.suit})]}):(0,s.jsx)("div",{className:"w-20 h-28 rounded-xl bg-gradient-to-br from-primary/20 to-primary/5 border-2 border-primary/20 animate-pulse"})}let C=[{label:"Couleurs",bets:[{value:"rouge",label:"ðŸ”´ Rouge",mult:"Ã—2"},{value:"noir",label:"âš« Noir",mult:"Ã—2"}]},{label:"ParitÃ©",bets:[{value:"pair",label:"Pair",mult:"Ã—2"},{value:"impair",label:"Impair",mult:"Ã—2"}]},{label:"MoitiÃ©s",bets:[{value:"1-18",label:"1-18",mult:"Ã—2"},{value:"19-36",label:"19-36",mult:"Ã—2"}]},{label:"Douzaines",bets:[{value:"doz1",label:"1Ã¨re (1-12)",mult:"Ã—3"},{value:"doz2",label:"2Ã¨me (13-24)",mult:"Ã—3"},{value:"doz3",label:"3Ã¨me (25-36)",mult:"Ã—3"}]},{label:"Colonnes",bets:[{value:"col1",label:"Col. 1",mult:"Ã—3"},{value:"col2",label:"Col. 2",mult:"Ã—3"},{value:"col3",label:"Col. 3",mult:"Ã—3"}]}];function k(){var e;let[w,k]=(0,t.useState)(!0),[T,$]=(0,t.useState)(null),[M,S]=(0,t.useState)(null),[_,B]=(0,t.useState)(0),[P,z]=(0,t.useState)([]),[q,A]=(0,t.useState)(100),[I,R]=(0,t.useState)(!1),[D,L]=(0,t.useState)(null),[O,F]=(0,t.useState)(0),[E,H]=(0,t.useState)("");function J(e,a){q<=0||z(s=>s.find(a=>a.bet===e)?s.map(a=>a.bet===e?{...a,mise:a.mise+q}:a):[...s,{bet:e,label:a,mise:q}])}let[U,K]=(0,t.useState)(null),[V,W]=(0,t.useState)(100),[X,G]=(0,t.useState)(!1),[Y,Z]=(0,t.useState)([]),[Q,ee]=(0,t.useState)([]),[ea,es]=(0,t.useState)(new Map),[et,er]=(0,t.useState)(100),[el,en]=(0,t.useState)(!1),[ei,ed]=(0,t.useState)(null),[eo,ec]=(0,t.useState)(["ðŸ’","ðŸ‹","ðŸŠ"]),[em,ex]=(0,t.useState)(100),[eu,eh]=(0,t.useState)("2.00"),[ep,eb]=(0,t.useState)(!1),[ej,eg]=(0,t.useState)(null),[ef,eN]=(0,t.useState)(1),ev=(0,t.useRef)(0),ew=(0,b.createClient)(a.default.env.NEXT_PUBLIC_SUPABASE_URL,a.default.env.NEXT_PUBLIC_SUPABASE_ANON_KEY),ey=(0,t.useCallback)(async e=>{let a=await fetch(`/api/casino/balance?guildId=${e}`);if(a.ok){let e=await a.json();S(e),B(e.balance)}},[]);async function eC(){if(!T||I||0===P.length)return;R(!0),L(null);let e=await fetch("/api/casino/roulette",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({guildId:T,bets:P})}),a=await e.json();if(!e.ok){R(!1),L({error:a.error});return}F(O+360*(5+Math.floor(3*Math.random()))+(360-360/37*N.indexOf(a.number))),setTimeout(()=>{L(a),B(a.newBalance),R(!1)},3500)}async function ek(e){if(!T||X)return;G(!0);let a=await fetch("/api/casino/blackjack",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({guildId:T,action:e,mise:"start"===e?V:void 0})}),s=await a.json();(G(!1),a.ok)?(K(s),void 0!==s.newBalance&&B(s.newBalance)):K(e=>({...e,error:s.error}))}async function eT(){if(!T||el)return;en(!0),ed(null);let e=await fetch("/api/casino/slots",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({guildId:T,mise:et})}),a=await e.json();if(!e.ok){en(!1),ed({error:a.error});return}let s=["ðŸ’","ðŸ‹","ðŸŠ","ðŸ‡","â­","ðŸ’Ž","7ï¸âƒ£"],t=0,r=setInterval(()=>{ec([++t<8?s[Math.floor(Math.random()*s.length)]:a.reels[0].emoji,t<14?s[Math.floor(Math.random()*s.length)]:a.reels[1].emoji,t<20?s[Math.floor(Math.random()*s.length)]:a.reels[2].emoji]),t>=20&&(clearInterval(r),ed(a),B(a.newBalance),en(!1))},100)}async function e$(){if(!T||ep)return;let e=parseFloat(eu);if(e<1.01||e>1e3)return;eb(!0),eg(null),eN(1),ev.current&&cancelAnimationFrame(ev.current);let a=await fetch("/api/casino/crash",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({guildId:T,mise:em,target:e})}),s=await a.json();if(!a.ok){eb(!1),eg({error:s.error});return}let t=performance.now();if(s.crashPoint<=1){eN(1),eg(s),B(s.newBalance),eb(!1);return}ev.current=requestAnimationFrame(function e(a){let r=+Math.exp(6e-4*(a-t));s.won&&r>=s.crashPoint?r=s.crashPoint:!s.won&&r>=s.crashPoint&&(r=s.crashPoint),eN(r),r<s.crashPoint?ev.current=requestAnimationFrame(e):(eN(s.crashPoint),eg(s),B(s.newBalance),eb(!1))})}if((0,t.useEffect)(()=>{let e=localStorage.getItem("selected_guild");($(e),e)?async function(){await ey(e);try{let{data:a}=await ew.from("bets").select(`
            id, guild_id, creator_id, title, status, type, resolved_option_id, created_at,
            bet_options:bet_options!bet_options_bet_id_fkey(id, name),
            bet_participants(id, option_id, user_id, amount)
          `).eq("guild_id",e).order("created_at",{ascending:!1}).limit(30);if(a){let s=new Set,t=a.map(e=>{let a=0,t={};e.bet_options?.forEach(e=>{t[e.id]=0}),e.bet_participants?.forEach(e=>{a+=Number(e.amount),t[e.option_id]=(t[e.option_id]||0)+Number(e.amount)});let r=2e3/(e.bet_options?.length||1),l=a+2e3,n=(e.bet_options||[]).map(e=>{let a=t[e.id]||0,s=l/(a+r);return s<1.01&&(s=1.01),{...e,totalMise:a,odds:s.toFixed(2)}});return s.add(e.creator_id),e.bet_participants?.forEach(e=>s.add(e.user_id)),{id:e.id,title:e.title,status:e.status,type:e.type,created_at:e.created_at,creator_id:e.creator_id,resolved_option_id:e.resolved_option_id,options:n,totalPool:a,participantCount:e.bet_participants?.length||0}});if(Z(t.filter(e=>"open"===e.status||"closed"===e.status)),ee(t.filter(e=>"resolved"===e.status||"cancelled"===e.status).slice(0,10)),s.size>0)try{es(await (0,j.getDiscordProfiles)(Array.from(s),e))}catch{}}}catch{}k(!1)}():k(!1)},[ey]),w)return(0,s.jsx)("div",{className:"flex h-96 items-center justify-center",children:(0,s.jsx)(m.Loader2,{className:"h-8 w-8 animate-spin text-primary"})});if(!T)return(0,s.jsx)("div",{className:"flex h-96 items-center justify-center text-muted-foreground",children:"SÃ©lectionne un serveur"});let eM=U?.result&&""!==U.result;return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"Casino"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Roulette, Blackjack et paris"})]}),(0,s.jsx)(r.Card,{className:"border-border bg-gradient-to-r from-amber-500/10 to-yellow-500/10 sm:w-auto",children:(0,s.jsxs)(r.CardContent,{className:"flex items-center gap-3 p-4",children:[(0,s.jsx)(h.Wallet,{className:"h-5 w-5 text-amber-500"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Ton solde"}),(0,s.jsxs)("p",{className:"text-xl font-bold text-amber-500",children:[g(_)," pq"]})]}),(0,s.jsx)(i.Button,{variant:"ghost",size:"icon",className:"ml-2 h-8 w-8",onClick:()=>T&&ey(T),children:(0,s.jsx)(p.RotateCcw,{className:"h-4 w-4"})})]})})]}),(0,s.jsxs)(l.Tabs,{defaultValue:"roulette",className:"w-full",children:[(0,s.jsxs)(l.TabsList,{className:"grid w-full grid-cols-5",children:[(0,s.jsxs)(l.TabsTrigger,{value:"roulette",className:"gap-2",children:[(0,s.jsx)("span",{className:"text-lg",children:"ðŸŽ°"}),(0,s.jsx)("span",{className:"hidden sm:inline",children:"Roulette"})]}),(0,s.jsxs)(l.TabsTrigger,{value:"blackjack",className:"gap-2",children:[(0,s.jsx)("span",{className:"text-lg",children:"ðŸƒ"}),(0,s.jsx)("span",{className:"hidden sm:inline",children:"Blackjack"})]}),(0,s.jsxs)(l.TabsTrigger,{value:"slots",className:"gap-2",children:[(0,s.jsx)("span",{className:"text-lg",children:"ðŸ’"}),(0,s.jsx)("span",{className:"hidden sm:inline",children:"Machine Ã  sous"})]}),(0,s.jsxs)(l.TabsTrigger,{value:"crash",className:"gap-2",children:[(0,s.jsx)("span",{className:"text-lg",children:"ðŸš€"}),(0,s.jsx)("span",{className:"hidden sm:inline",children:"Crash"})]}),(0,s.jsxs)(l.TabsTrigger,{value:"bets",className:"gap-2",children:[(0,s.jsx)(c.Dices,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"hidden sm:inline",children:"Paris"})]})]}),(0,s.jsxs)(l.TabsContent,{value:"roulette",className:"mt-6 space-y-6",children:[(0,s.jsxs)("div",{className:"grid gap-6 lg:grid-cols-2",children:[(0,s.jsxs)(r.Card,{className:"border-border bg-gradient-to-br from-card to-emerald-500/5",children:[(0,s.jsx)(r.CardHeader,{children:(0,s.jsx)(r.CardTitle,{className:"text-center",children:"ðŸŽ° Roulette EuropÃ©enne"})}),(0,s.jsxs)(r.CardContent,{className:"flex flex-col items-center space-y-6",children:[(0,s.jsxs)("div",{className:"relative w-72 h-72",children:[(0,s.jsx)("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1 z-10 w-0 h-0 border-l-[10px] border-r-[10px] border-t-[20px] border-l-transparent border-r-transparent border-t-amber-400 drop-shadow-lg"}),(0,s.jsx)("div",{className:"w-72 h-72 rounded-full border-4 border-amber-500/50 overflow-hidden shadow-2xl shadow-amber-500/10",style:{transform:`rotate(${O}deg)`,transition:I?"transform 3.5s cubic-bezier(0.17, 0.67, 0.12, 0.99)":"none"},children:(0,s.jsxs)("svg",{viewBox:"0 0 200 200",className:"w-full h-full",children:[N.map((e,a)=>{let t=360*a/37,r=(a+1)*360/37,l=(t+r)/2,n=Math.PI/180*(t-90),i=Math.PI/180*(r-90),d=Math.PI/180*(l-90),o=100+100*Math.cos(n),c=100+100*Math.sin(n),m=100+100*Math.cos(i),x=100+100*Math.sin(i),u=100+40*Math.cos(i),h=100+40*Math.sin(i),p=100+40*Math.cos(n),b=100+40*Math.sin(n),j=100+73*Math.cos(d),g=100+73*Math.sin(d),f=0===e?"#059669":v.has(e)?"#dc2626":"#18181b";return(0,s.jsxs)("g",{children:[(0,s.jsx)("path",{d:`M ${o} ${c} A 100 100 0 0 1 ${m} ${x} L ${u} ${h} A 40 40 0 0 0 ${p} ${b} Z`,fill:f,stroke:"#333",strokeWidth:"0.5"}),(0,s.jsx)("text",{x:j,y:g,textAnchor:"middle",dominantBaseline:"central",fill:"white",fontSize:"6",fontWeight:"bold",transform:`rotate(${l}, ${j}, ${g})`,children:e})]},e)}),(0,s.jsx)("circle",{cx:"100",cy:"100",r:"38",fill:"#1a1a2e",stroke:"#333",strokeWidth:"1"}),(0,s.jsx)("text",{x:"100",y:"100",textAnchor:"middle",dominantBaseline:"central",fill:"#f59e0b",fontSize:"10",fontWeight:"bold",children:D?D.number:"ðŸŽ°"})]})})]}),D&&!D.error&&(0,s.jsxs)("div",{className:`rounded-2xl p-4 text-center w-full ${D.won?"bg-emerald-500/10 border border-emerald-500/30":"bg-red-500/10 border border-red-500/30"}`,children:[(0,s.jsxs)("div",{className:"flex items-center justify-center gap-3 mb-2",children:[(0,s.jsx)("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold text-white ${0===(e=D.number)?"bg-emerald-600":v.has(e)?"bg-red-600":"bg-zinc-900"}`,children:D.number}),(0,s.jsx)("span",{className:"text-lg font-bold",children:"red"===D.color?"ðŸ”´ Rouge":"black"===D.color?"âš« Noir":"ðŸŸ¢ Vert"})]}),(0,s.jsx)("div",{className:"text-sm mb-2 text-muted-foreground break-words",children:D.results.map((e,a)=>(0,s.jsxs)("span",{className:e.won?"text-emerald-400":"text-red-400",children:[e.bet," (",g(e.mise),"pq)",e.won?` +${g(e.winnings)}`:"",a<D.results.length-1?" | ":""]},a))}),(0,s.jsx)("p",{className:`text-xl font-bold ${D.won?"text-emerald-400":"text-red-400"}`,children:D.won?`+${g(D.winnings)} pq ðŸŽ‰`:`-${g(D.totalMise)} pq`})]}),D?.error&&(0,s.jsxs)("div",{className:"rounded-2xl bg-red-500/10 border border-red-500/30 p-4 text-center text-red-400 w-full",children:["âŒ ",D.error]})]})]}),(0,s.jsxs)(r.Card,{className:"border-border bg-card",children:[(0,s.jsxs)(r.CardHeader,{children:[(0,s.jsx)(r.CardTitle,{children:"Placer ta mise"}),(0,s.jsx)(r.CardDescription,{children:"Choisis ton pari et le montant"})]}),(0,s.jsxs)(r.CardContent,{className:"space-y-5",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium text-foreground",children:"Montant"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(o.Input,{type:"number",min:1,max:5e4,value:q,onChange:e=>A(Math.max(1,parseInt(e.target.value)||0)),className:"flex-1"}),(0,s.jsx)("div",{className:"flex gap-1",children:[100,500,1e3,5e3].map(e=>(0,s.jsx)(i.Button,{variant:"outline",size:"sm",className:"text-xs",onClick:()=>A(e),children:e>=1e3?`${e/1e3}k`:e},e))})]})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[C.map(e=>(0,s.jsxs)("div",{className:"space-y-1.5",children:[(0,s.jsx)("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:e.label}),(0,s.jsx)("div",{className:"flex flex-wrap gap-1.5",children:e.bets.map(e=>{let a=P.some(a=>a.bet===e.value);return(0,s.jsxs)(i.Button,{variant:a?"default":"outline",size:"sm",className:"text-xs",onClick:()=>J(e.value,e.label),children:[e.label," ",(0,s.jsx)("span",{className:"ml-1 opacity-60",children:e.mult})]},e.value)})})]},e.label)),(0,s.jsxs)("div",{className:"space-y-1.5",children:[(0,s.jsx)("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"NumÃ©ro direct (Ã—36)"}),(0,s.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,s.jsx)(o.Input,{type:"number",min:0,max:36,placeholder:"0-36",value:E,onChange:e=>H(e.target.value),className:"w-24"}),(0,s.jsx)(i.Button,{variant:"outline",size:"sm",onClick:()=>{""!==E&&parseInt(E)>=0&&36>=parseInt(E)&&(J(E,`Num\xe9ro ${E}`),H(""))},children:"Ajouter"})]})]})]}),P.length>0&&(0,s.jsxs)("div",{className:"flex flex-col gap-2 p-3 rounded-lg bg-black/20 border border-white/5",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[(0,s.jsx)("span",{className:"text-sm font-semibold",children:"Paris en cours"}),(0,s.jsx)(i.Button,{variant:"ghost",size:"sm",className:"h-6 px-2 text-xs text-red-400 hover:text-red-300 hover:bg-red-400/10",onClick:function(){z([])},children:"Tout effacer"})]}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:P.map(e=>(0,s.jsxs)(n.Badge,{variant:"secondary",className:"pl-2 pr-1 py-1 flex items-center gap-1 bg-white/5",children:[(0,s.jsxs)("span",{children:[e.label," ",(0,s.jsxs)("span",{className:"text-amber-400 ml-1",children:[g(e.mise)," pq"]})]}),(0,s.jsx)("div",{className:"ml-1 cursor-pointer opacity-50 hover:opacity-100 p-0.5 rounded-full hover:bg-white/10",onClick:()=>{var a;return a=e.bet,void z(e=>e.filter(e=>e.bet!==a))},children:"âœ•"})]},e.bet))}),(0,s.jsxs)("div",{className:"text-right text-sm text-muted-foreground mt-1",children:["Total: ",(0,s.jsxs)("span",{className:"text-amber-400 font-bold",children:[g(P.reduce((e,a)=>e+a.mise,0))," pq"]})]})]}),(0,s.jsx)(i.Button,{className:"w-full h-14 text-lg font-bold gap-2 bg-gradient-to-r from-emerald-600 to-emerald-500 hover:from-emerald-500 hover:to-emerald-400 shadow-lg shadow-emerald-500/20",disabled:I||0===P.length,onClick:eC,children:I?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(m.Loader2,{className:"h-5 w-5 animate-spin"})," La roue tourne..."]}):(0,s.jsxs)(s.Fragment,{children:["ðŸŽ° Tourner la roue â€” ",g(P.reduce((e,a)=>e+a.mise,0))," pq"]})})]})]})]}),(0,s.jsxs)(r.Card,{className:"border-border bg-card",children:[(0,s.jsx)(r.CardHeader,{children:(0,s.jsx)(r.CardTitle,{children:"Table de la Roulette"})}),(0,s.jsx)(r.CardContent,{children:(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("div",{className:"grid grid-cols-13 gap-0.5 min-w-[520px]",style:{gridTemplateColumns:"repeat(13, 1fr)"},children:[(0,s.jsx)("button",{onClick:()=>J("0","NumÃ©ro 0"),className:`row-span-3 rounded-lg flex items-center justify-center text-sm font-bold text-white transition-all hover:scale-105 ${P.some(e=>"0"===e.bet)?"ring-2 ring-amber-400 scale-105":""} bg-emerald-600 h-full min-h-[80px]`,children:"0"}),[[3,6,9,12,15,18,21,24,27,30,33,36],[2,5,8,11,14,17,20,23,26,29,32,35],[1,4,7,10,13,16,19,22,25,28,31,34]].map((e,a)=>e.map(e=>(0,s.jsx)("button",{onClick:()=>J(String(e),`Num\xe9ro ${e}`),className:`h-[28px] rounded flex items-center justify-center text-xs font-bold text-white transition-all hover:scale-110 ${P.some(a=>a.bet===String(e))?"ring-2 ring-amber-400 scale-110":""} ${v.has(e)?"bg-red-600 hover:bg-red-500":"bg-zinc-800 hover:bg-zinc-700"}`,children:e},e)))]})})})]})]}),(0,s.jsx)(l.TabsContent,{value:"blackjack",className:"mt-6 space-y-6",children:(0,s.jsxs)(r.Card,{className:"border-border bg-gradient-to-br from-card via-card to-emerald-500/5",children:[(0,s.jsxs)(r.CardHeader,{className:"text-center",children:[(0,s.jsx)(r.CardTitle,{className:"text-2xl",children:"ðŸƒ Blackjack"}),(0,s.jsx)(r.CardDescription,{children:"Bat le croupier sans dÃ©passer 21"})]}),(0,s.jsx)(r.CardContent,{className:"space-y-8",children:U?(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsxs)("div",{className:"text-center space-y-3",children:[(0,s.jsxs)("p",{className:"text-sm font-medium text-muted-foreground uppercase tracking-wider",children:["Croupier ",eM?`â€” ${U.dealerValue}`:`â€” ${U.dealerValue}+?`]}),(0,s.jsx)("div",{className:"flex justify-center gap-3 flex-wrap",children:U.dealer.map((e,a)=>(0,s.jsx)(y,{card:e,delay:eM&&1===a?300:0},a))})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"flex-1 h-px bg-border"}),eM&&(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[U.results.map((e,a)=>(0,s.jsxs)("div",{className:`px-6 py-2 rounded-full font-bold text-sm text-center ${"win"===e||"blackjack"===e||"dealer_bust"===e?"bg-emerald-500/10 text-emerald-400 border border-emerald-500/30":"push"===e?"bg-amber-500/10 text-amber-400 border border-amber-500/30":"bg-red-500/10 text-red-400 border border-red-500/30"}`,children:[U.hands.length>1&&(0,s.jsxs)("span",{className:"opacity-70 mr-2",children:["Main ",a+1]}),"blackjack"===e&&"ðŸŽ° BLACKJACK !","win"===e&&"âœ… Tu gagnes !","dealer_bust"===e&&"ðŸ’¥ Croupier bust !","push"===e&&"ðŸ¤ Ã‰galitÃ©","bust"===e&&"ðŸ’€ Bust !","lose"===e&&"âŒ Perdu"]},a)),U.totalPayout>0&&(0,s.jsxs)("div",{className:"text-center font-bold text-emerald-400",children:["+",g(U.totalPayout)," pq"]})]}),(0,s.jsx)("div",{className:"flex-1 h-px bg-border"})]}),(0,s.jsx)("div",{className:"flex flex-col gap-6",children:U.hands.map((e,a)=>{let t=U.values[a],r=!eM&&a===U.currentHand;return(0,s.jsxs)("div",{className:`text-center space-y-3 transition-opacity duration-300 ${!r&&!eM?"opacity-50":"opacity-100"}`,children:[(0,s.jsxs)("div",{className:"flex justify-center gap-3 flex-wrap relative",children:[r&&(0,s.jsx)("div",{className:"absolute -left-8 top-1/2 -translate-y-1/2 text-xl animate-pulse",children:"ðŸ‘‰"}),e.map((e,a)=>(0,s.jsx)(y,{card:e,delay:200*(a>=2)},a))]}),(0,s.jsxs)("p",{className:"text-sm font-medium text-muted-foreground uppercase tracking-wider",children:[U.hands.length>1?`Main ${a+1} â€” `:"Toi â€” ",(0,s.jsx)("span",{className:`font-bold ${t>21?"text-red-400":21===t?"text-emerald-400":"text-foreground"}`,children:t})]}),(0,s.jsx)("div",{className:"flex justify-center",children:(0,s.jsxs)(n.Badge,{variant:"outline",className:"bg-amber-500/5 text-amber-400 border-amber-500/20",children:["Mise: ",g(U.bets[a])," pq",U.doubled[a]&&" (double)"]})})]},a)})}),(0,s.jsx)("div",{className:"flex justify-center",children:(0,s.jsxs)(n.Badge,{className:"bg-amber-500/10 text-amber-400 border-amber-500/20 text-base px-4 py-1",children:["Mise: ",g(U.bet)," pq",U.doubled&&" (doublÃ©)"]})}),eM?(0,s.jsx)("div",{className:"flex justify-center border-t border-border pt-6",children:(0,s.jsxs)(i.Button,{onClick:()=>K(null),className:"gap-2 h-12 px-8 bg-gradient-to-r from-primary to-primary/80",children:[(0,s.jsx)(p.RotateCcw,{className:"h-4 w-4"})," Nouvelle partie"]})}):(0,s.jsxs)("div",{className:"flex justify-center gap-3 flex-wrap border-t border-border pt-6",children:[(0,s.jsxs)(i.Button,{onClick:()=>ek("hit"),disabled:X,className:"bg-blue-600 hover:bg-blue-500 text-white gap-2 h-12 px-8",children:[X?(0,s.jsx)(m.Loader2,{className:"h-4 w-4 animate-spin"}):"ðŸŽ¯"," Tirer"]}),(0,s.jsx)(i.Button,{onClick:()=>ek("stand"),disabled:X,variant:"outline",className:"gap-2 h-12 px-8",children:"âœ‹ Rester"}),(0,s.jsx)(i.Button,{onClick:()=>ek("double"),disabled:X||!U.canAfford||U.hands[U.currentHand].length>2,className:"bg-amber-600 hover:bg-amber-500 text-white gap-2 h-12 px-8",children:"ðŸ’° Doubler"}),U.canSplit&&(0,s.jsx)(i.Button,{onClick:()=>ek("split"),disabled:X||!U.canAfford,className:"bg-purple-600 hover:bg-purple-500 text-white gap-2 h-12 px-8",children:"âœ‚ï¸ SÃ©parer"})]}),U.error&&(0,s.jsxs)("p",{className:"text-center text-red-400",children:["âŒ ",U.error]})]}):(0,s.jsxs)("div",{className:"flex flex-col items-center space-y-6 py-8",children:[(0,s.jsx)("div",{className:"flex gap-3 opacity-30",children:[{suit:"â™ ",rank:"A"},{suit:"â™¥",rank:"K"}].map((e,a)=>(0,s.jsx)(y,{card:e},a))}),(0,s.jsxs)("div",{className:"space-y-3 text-center",children:[(0,s.jsx)("p",{className:"text-muted-foreground",children:"Place ta mise pour commencer"}),(0,s.jsxs)("div",{className:"flex items-center gap-2 justify-center",children:[(0,s.jsx)(o.Input,{type:"number",min:1,max:5e4,value:V,onChange:e=>W(Math.max(1,parseInt(e.target.value)||0)),className:"w-32 text-center"}),(0,s.jsx)("span",{className:"text-muted-foreground",children:"pq"})]}),(0,s.jsx)("div",{className:"flex gap-2 justify-center",children:[100,500,1e3,5e3].map(e=>(0,s.jsx)(i.Button,{variant:"outline",size:"sm",className:"text-xs",onClick:()=>W(e),children:e>=1e3?`${e/1e3}k`:e},e))}),(0,s.jsxs)(i.Button,{className:"h-14 px-10 text-lg font-bold gap-2 bg-gradient-to-r from-blue-600 to-blue-500 hover:from-blue-500 hover:to-blue-400 shadow-lg shadow-blue-500/20",disabled:X||V<=0,onClick:()=>ek("start"),children:[X?(0,s.jsx)(m.Loader2,{className:"h-5 w-5 animate-spin"}):"ðŸƒ"," Jouer â€” ",g(V)," pq"]})]})]})})]})}),(0,s.jsx)(l.TabsContent,{value:"slots",className:"mt-6 space-y-6",children:(0,s.jsxs)(r.Card,{className:"border-border bg-gradient-to-br from-card via-card to-purple-500/5",children:[(0,s.jsxs)(r.CardHeader,{className:"text-center",children:[(0,s.jsx)(r.CardTitle,{className:"text-2xl",children:"ðŸ’ Machine Ã  Sous"}),(0,s.jsx)(r.CardDescription,{children:"Aligne 3 symboles identiques pour gagner !"})]}),(0,s.jsxs)(r.CardContent,{className:"space-y-8",children:[(0,s.jsx)("div",{className:"flex justify-center",children:(0,s.jsx)("div",{className:"rounded-3xl bg-gradient-to-br from-zinc-800 to-zinc-900 border-4 border-amber-500/30 p-8 shadow-2xl shadow-amber-500/10",children:(0,s.jsx)("div",{className:"flex gap-4",children:eo.map((e,a)=>(0,s.jsx)("div",{className:`w-24 h-24 rounded-2xl bg-gradient-to-br from-zinc-700 to-zinc-800 border-2 border-zinc-600 flex items-center justify-center text-5xl transition-all duration-200 ${el?"animate-bounce":""} ${ei?.won&&ei?.type==="triple"?"ring-4 ring-amber-400 shadow-lg shadow-amber-400/30":""}`,style:el?{animationDelay:`${100*a}ms`}:{},children:e},a))})})}),(0,s.jsxs)("div",{className:"grid grid-cols-4 gap-2 text-center text-sm",children:[[{emoji:"ðŸ’",name:"Cerise",mult:"Ã—3"},{emoji:"ðŸ‹",name:"Citron",mult:"Ã—5"},{emoji:"ðŸŠ",name:"Orange",mult:"Ã—8"},{emoji:"ðŸ‡",name:"Raisin",mult:"Ã—12"},{emoji:"â­",name:"Ã‰toile",mult:"Ã—25"},{emoji:"ðŸ’Ž",name:"Diamant",mult:"Ã—100"},{emoji:"7ï¸âƒ£",name:"JACKPOT",mult:"Ã—500"}].map(e=>(0,s.jsxs)("div",{className:"rounded-xl bg-muted/30 p-2",children:[(0,s.jsx)("span",{className:"text-xl",children:e.emoji}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:e.mult})]},e.name)),(0,s.jsxs)("div",{className:"rounded-xl bg-muted/30 p-2",children:[(0,s.jsx)("span",{className:"text-sm",children:"2x"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Ã·1/4"})]})]}),ei&&!ei.error&&(0,s.jsxs)("div",{className:`rounded-2xl p-5 text-center ${ei.won?"bg-emerald-500/10 border border-emerald-500/30":"bg-red-500/10 border border-red-500/30"} ${ei.isJackpot?"ring-2 ring-amber-400 animate-pulse":""}`,children:[ei.isJackpot&&(0,s.jsx)("p",{className:"text-3xl font-black text-amber-400 mb-2",children:"ðŸŽ° JACKPOT !!! ðŸŽ°"}),(0,s.jsx)("p",{className:`text-xl font-bold ${ei.won?"text-emerald-400":"text-red-400"}`,children:ei.won?`+${g(ei.winnings)} pq (\xd7${ei.multiplier}) ðŸŽ‰`:`-${g(et)} pq`}),"double"===ei.type&&(0,s.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"2 symboles identiques !"}),"triple"===ei.type&&(0,s.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"3 symboles identiques !"})]}),ei?.error&&(0,s.jsxs)("div",{className:"rounded-2xl bg-red-500/10 border border-red-500/30 p-4 text-center text-red-400",children:["âŒ ",ei.error]}),(0,s.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(o.Input,{type:"number",min:1,max:5e4,value:et,onChange:e=>er(Math.max(1,parseInt(e.target.value)||0)),className:"w-32 text-center"}),(0,s.jsx)("span",{className:"text-muted-foreground",children:"pq"})]}),(0,s.jsx)("div",{className:"flex gap-2",children:[100,500,1e3,5e3].map(e=>(0,s.jsx)(i.Button,{variant:"outline",size:"sm",className:"text-xs",onClick:()=>er(e),children:e>=1e3?`${e/1e3}k`:e},e))}),(0,s.jsx)(i.Button,{className:"h-14 px-10 text-lg font-bold gap-2 bg-gradient-to-r from-purple-600 to-purple-500 hover:from-purple-500 hover:to-purple-400 shadow-lg shadow-purple-500/20 w-full max-w-sm",disabled:el||et<=0,onClick:eT,children:el?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(m.Loader2,{className:"h-5 w-5 animate-spin"})," Spinning..."]}):(0,s.jsxs)(s.Fragment,{children:["ðŸ’ Tirer le levier â€” ",g(et)," pq"]})})]})]})]})}),(0,s.jsx)(l.TabsContent,{value:"crash",className:"mt-6 space-y-6",children:(0,s.jsxs)(r.Card,{className:"border-border bg-gradient-to-br from-card via-card to-orange-500/5",children:[(0,s.jsxs)(r.CardHeader,{className:"text-center",children:[(0,s.jsx)(r.CardTitle,{className:"text-2xl",children:"ðŸš€ Crash"}),(0,s.jsx)(r.CardDescription,{children:"La fusÃ©e s'envole... Multiplie tes gains avant l'explosion !"})]}),(0,s.jsxs)(r.CardContent,{className:"space-y-8",children:[(0,s.jsxs)("div",{className:"relative h-64 w-full rounded-3xl bg-zinc-950 border border-zinc-800 overflow-hidden flex items-center justify-center shadow-inner",children:[(0,s.jsx)("div",{className:"absolute inset-0 opacity-10",style:{backgroundImage:"linear-gradient(#fff 1px, transparent 1px), linear-gradient(90deg, #fff 1px, transparent 1px)",backgroundSize:"20px 20px"}}),(0,s.jsxs)("div",{className:`z-10 text-7xl font-black tabular-nums transition-colors duration-200 ${ej&&!ej.won&&!ej.error?"text-red-500":ej&&ej.won&&!ej.error?"text-emerald-400":"text-white"}`,children:[ef.toFixed(2),"x"]}),ep&&parseFloat(eu)<=ef&&(0,s.jsxs)("div",{className:"absolute top-8 text-xl font-bold font-mono text-emerald-400 bg-emerald-500/10 px-4 py-1.5 rounded-full ring-1 ring-emerald-500/50 animate-bounce",children:["Retrait: ",eu,"x"]}),ej&&!ej.error&&(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center opacity-30 pointer-events-none",children:(0,s.jsx)("div",{className:"w-full text-center text-red-500 text-9xl animate-pulse blur-sm",children:"ðŸ’¥"})})]}),(0,s.jsxs)("div",{className:"max-w-xl mx-auto space-y-6",children:[ej&&!ej.error&&(0,s.jsxs)("div",{className:`rounded-2xl p-4 text-center border ${ej.won?"bg-emerald-500/10 border-emerald-500/30 text-emerald-400":"bg-red-500/10 border-red-500/30 text-red-400"}`,children:[(0,s.jsx)("p",{className:"font-bold text-lg",children:ej.won?`Retrait r\xe9ussi (+${g(ej.winnings)} pq)`:`Crashed \xe0 ${ej.crashPoint}x !`}),!ej.won&&(0,s.jsxs)("p",{className:"text-sm opacity-80 mt-1",children:["La fusÃ©e a explosÃ© avant ton objectif de ",eu,"x"]})]}),ej?.error&&(0,s.jsxs)("div",{className:"rounded-2xl bg-red-500/10 border border-red-500/30 p-4 text-center text-red-400",children:["âŒ ",ej.error]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium text-foreground",children:"Mise (pq)"}),(0,s.jsx)(o.Input,{type:"number",min:1,max:5e5,value:em,onChange:e=>ex(Math.max(1,parseInt(e.target.value)||0)),disabled:ep,className:"text-lg h-12"}),(0,s.jsx)("div",{className:"flex gap-1",children:[100,1e3,"1/2","Max"].map(e=>(0,s.jsx)(i.Button,{variant:"outline",size:"sm",className:"text-xs h-8 flex-1 px-0",disabled:ep,onClick:()=>{"1/2"===e?ex(Math.max(1,Math.floor(em/2))):"Max"===e?ex(Math.min(5e5,_)):ex(e)},children:e},e))})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium text-foreground",children:"Retrait Auto (x)"}),(0,s.jsx)(o.Input,{type:"number",min:1.01,step:.1,value:eu,onChange:e=>eh(e.target.value),disabled:ep,className:"text-lg h-12"}),(0,s.jsx)("div",{className:"flex gap-1",children:["1.50","2.00","5.00","10.0"].map(e=>(0,s.jsxs)(i.Button,{variant:"outline",size:"sm",className:"text-xs h-8 flex-1 px-0",disabled:ep,onClick:()=>eh(e),children:[e,"x"]},e))})]})]}),(0,s.jsxs)(i.Button,{className:"w-full h-16 text-xl font-bold overflow-hidden relative group bg-gradient-to-r from-orange-600 to-amber-500 hover:from-orange-500 hover:to-amber-400",disabled:ep||em<=0||1.01>parseFloat(eu),onClick:e$,children:[ep?(0,s.jsxs)("span",{className:"flex items-center gap-2",children:[(0,s.jsx)(m.Loader2,{className:"h-6 w-6 animate-spin"})," En vol..."]}):(0,s.jsx)("span",{className:"flex items-center gap-2",children:"DÃ©coller ðŸš€"}),(0,s.jsx)("div",{className:"absolute inset-0 bg-white/20 translate-y-full group-hover:translate-y-0 transition-transform duration-300"})]})]})]})]})}),(0,s.jsxs)(l.TabsContent,{value:"bets",className:"mt-6 space-y-6",children:[(0,s.jsxs)(r.Card,{className:"border-border bg-card",children:[(0,s.jsxs)(r.CardHeader,{children:[(0,s.jsxs)(r.CardTitle,{className:"flex items-center gap-2",children:[(0,s.jsx)(c.Dices,{className:"h-5 w-5 text-purple-500"}),"Paris en cours"]}),(0,s.jsx)(r.CardDescription,{children:"Paris ouverts ou en attente â€¢ Mise via /pari sur Discord"})]}),(0,s.jsx)(r.CardContent,{children:0===Y.length?(0,s.jsx)("p",{className:"py-8 text-center text-muted-foreground",children:"Aucun pari en cours â€” CrÃ©e un pari avec /pari sur Discord !"}):(0,s.jsx)("div",{className:"space-y-4",children:Y.map(e=>{var a;return(0,s.jsxs)("div",{className:"rounded-2xl border border-border bg-muted/30 p-5 space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-foreground",children:e.title}),(0,s.jsxs)("p",{className:"text-sm text-muted-foreground mt-0.5",children:["Par ",(a=e.creator_id,ea.get(a)?.username||"Utilisateur")," Â· ",f(e.created_at)]})]}),(0,s.jsx)(n.Badge,{className:"open"===e.status?"bg-emerald-500/10 text-emerald-500 border-emerald-500/20":"bg-amber-500/10 text-amber-500 border-amber-500/20",children:"open"===e.status?"ðŸŸ¢ Ouvert":"ðŸŸ¡ FermÃ©"})]}),(0,s.jsx)("div",{className:"grid gap-2 sm:grid-cols-2",children:e.options.map(a=>{let t=e.totalPool>0?a.totalMise/e.totalPool*100:0;return(0,s.jsxs)("div",{className:"rounded-xl border border-border bg-card p-3 space-y-2",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"font-medium text-foreground",children:a.name}),(0,s.jsxs)(n.Badge,{variant:"outline",className:"text-primary",children:["Ã—",a.odds]})]}),(0,s.jsx)(d.Progress,{value:t,className:"h-1.5"}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:[g(a.totalMise)," pq (",t.toFixed(0),"%)"]})]},a.id)})}),(0,s.jsxs)("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)(x.Users,{className:"h-4 w-4"}),e.participantCount]}),(0,s.jsxs)("span",{children:["ðŸ’° ",g(e.totalPool)," pq"]}),"valorant_next_match"===e.type&&(0,s.jsx)(n.Badge,{variant:"outline",className:"text-red-400 border-red-500/20",children:"ðŸŽ¯ Valorant"})]})]},e.id)})})})]}),(0,s.jsxs)(r.Card,{className:"border-border bg-card",children:[(0,s.jsx)(r.CardHeader,{children:(0,s.jsxs)(r.CardTitle,{className:"flex items-center gap-2",children:[(0,s.jsx)(u.Clock,{className:"h-5 w-5 text-blue-500"}),"Historique"]})}),(0,s.jsx)(r.CardContent,{children:0===Q.length?(0,s.jsx)("p",{className:"py-8 text-center text-muted-foreground",children:"Aucun historique"}):(0,s.jsx)("div",{className:"space-y-3",children:Q.map(e=>{let a=e.options.find(a=>a.id===e.resolved_option_id);return(0,s.jsxs)("div",{className:"flex items-center gap-4 rounded-2xl bg-muted/30 p-4",children:[(0,s.jsx)("div",{className:`flex h-10 w-10 shrink-0 items-center justify-center rounded-xl text-lg ${"resolved"===e.status?"bg-emerald-500/10":"bg-red-500/10"}`,children:"resolved"===e.status?"âœ…":"âŒ"}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("p",{className:"font-medium text-foreground truncate",children:e.title}),(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:["resolved"===e.status&&a?`Gagnant: ${a.name}`:"AnnulÃ©"," Â· ",f(e.created_at)]})]}),(0,s.jsxs)("div",{className:"text-right shrink-0",children:[(0,s.jsxs)("p",{className:"text-sm font-semibold",children:[g(e.totalPool)," pq"]}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:[e.participantCount," joueurs"]})]})]},e.id)})})})]})]})]})]})}e.s(["default",()=>k])}]);