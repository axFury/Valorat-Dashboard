(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,70065,e=>{"use strict";var t=e.i(43476),a=e.i(47163);function r({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...r})}function s({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,a.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...r})}function i({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,a.cn)("leading-none font-semibold",e),...r})}function o({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-description",className:(0,a.cn)("text-muted-foreground text-sm",e),...r})}function n({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,a.cn)("px-6",e),...r})}e.s(["Card",()=>r,"CardContent",()=>n,"CardDescription",()=>o,"CardHeader",()=>s,"CardTitle",()=>i])},31278,e=>{"use strict";let t=(0,e.i(75254).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],31278)},3116,e=>{"use strict";let t=(0,e.i(75254).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);e.s(["Clock",()=>t],3116)},9156,(e,t,a)=>{"use strict";let r;Object.defineProperty(a,"__esModule",{value:!0}),a.parseCookie=u,a.parse=u,a.stringifyCookie=function(e,t){let a=t?.encode||encodeURIComponent,r=[];for(let t of Object.keys(e)){let o=e[t];if(void 0===o)continue;if(!s.test(t))throw TypeError(`cookie name is invalid: ${t}`);let n=a(o);if(!i.test(n))throw TypeError(`cookie val is invalid: ${o}`);r.push(`${t}=${n}`)}return r.join("; ")},a.stringifySetCookie=m,a.serialize=m,a.parseSetCookie=function(e,t){let a=t?.decode||f,r=e.length,s=p(e,0,r),i=h(e,0,s),o=-1===i?{name:"",value:a(x(e,0,s))}:{name:x(e,0,i),value:a(x(e,i+1,s))},n=s+1;for(;n<r;){let t=p(e,n,r),a=h(e,n,t),s=-1===a?x(e,n,t):x(e,n,a),i=-1===a?void 0:x(e,a+1,t);switch(s.toLowerCase()){case"httponly":o.httpOnly=!0;break;case"secure":o.secure=!0;break;case"partitioned":o.partitioned=!0;break;case"domain":o.domain=i;break;case"path":o.path=i;break;case"max-age":i&&l.test(i)&&(o.maxAge=Number(i));break;case"expires":if(!i)break;let d=new Date(i);Number.isFinite(d.valueOf())&&(o.expires=d);break;case"priority":if(!i)break;let c=i.toLowerCase();("low"===c||"medium"===c||"high"===c)&&(o.priority=c);break;case"samesite":if(!i)break;let u=i.toLowerCase();("lax"===u||"strict"===u||"none"===u)&&(o.sameSite=u)}n=t+1}return o},a.stringifySetCookie=m,a.serialize=m;let s=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,i=/^[\u0021-\u003A\u003C-\u007E]*$/,o=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,n=/^[\u0020-\u003A\u003D-\u007E]*$/,l=/^-?\d+$/,d=Object.prototype.toString,c=((r=function(){}).prototype=Object.create(null),r);function u(e,t){let a=new c,r=e.length;if(r<2)return a;let s=t?.decode||f,i=0;do{let t=h(e,i,r);if(-1===t)break;let o=p(e,i,r);if(t>o){i=e.lastIndexOf(";",t-1)+1;continue}let n=x(e,i,t);void 0===a[n]&&(a[n]=s(x(e,t+1,o))),i=o+1}while(i<r)return a}function m(e,t,a){let r="object"==typeof e?e:{...a,name:e,value:String(t)},l=("object"==typeof t?t:a)?.encode||encodeURIComponent;if(!s.test(r.name))throw TypeError(`argument name is invalid: ${r.name}`);let c=r.value?l(r.value):"";if(!i.test(c))throw TypeError(`argument val is invalid: ${r.value}`);let u=r.name+"="+c;if(void 0!==r.maxAge){if(!Number.isInteger(r.maxAge))throw TypeError(`option maxAge is invalid: ${r.maxAge}`);u+="; Max-Age="+r.maxAge}if(r.domain){if(!o.test(r.domain))throw TypeError(`option domain is invalid: ${r.domain}`);u+="; Domain="+r.domain}if(r.path){if(!n.test(r.path))throw TypeError(`option path is invalid: ${r.path}`);u+="; Path="+r.path}if(r.expires){var m;if(m=r.expires,"[object Date]"!==d.call(m)||!Number.isFinite(r.expires.valueOf()))throw TypeError(`option expires is invalid: ${r.expires}`);u+="; Expires="+r.expires.toUTCString()}if(r.httpOnly&&(u+="; HttpOnly"),r.secure&&(u+="; Secure"),r.partitioned&&(u+="; Partitioned"),r.priority)switch("string"==typeof r.priority?r.priority.toLowerCase():void 0){case"low":u+="; Priority=Low";break;case"medium":u+="; Priority=Medium";break;case"high":u+="; Priority=High";break;default:throw TypeError(`option priority is invalid: ${r.priority}`)}if(r.sameSite)switch("string"==typeof r.sameSite?r.sameSite.toLowerCase():r.sameSite){case!0:case"strict":u+="; SameSite=Strict";break;case"lax":u+="; SameSite=Lax";break;case"none":u+="; SameSite=None";break;default:throw TypeError(`option sameSite is invalid: ${r.sameSite}`)}return u}function p(e,t,a){let r=e.indexOf(";",t);return -1===r?a:r}function h(e,t,a){let r=e.indexOf("=",t);return r<a?r:-1}function x(e,t,a){let r=t,s=a;do{let t=e.charCodeAt(r);if(32!==t&&9!==t)break}while(++r<s)for(;s>r;){let t=e.charCodeAt(s-1);if(32!==t&&9!==t)break;s--}return e.slice(r,s)}function f(e){if(-1===e.indexOf("%"))return e;try{return decodeURIComponent(e)}catch(t){return e}}},52683,(e,t,a)=>{},27341,72390,29225,30536,e=>{"use strict";let t;var a=e.i(43476),r=e.i(71645),s=e.i(81140),i=e.i(30030),o=e.i(42727),n=e.i(96626),l=e.i(48425),d=e.i(86318),c=e.i(69340),u=e.i(10772),m="Tabs",[p,h]=(0,i.createContextScope)(m,[o.createRovingFocusGroupScope]),x=(0,o.createRovingFocusGroupScope)(),[f,g]=p(m),b=r.forwardRef((e,t)=>{let{__scopeTabs:r,value:s,onValueChange:i,defaultValue:o,orientation:n="horizontal",dir:m,activationMode:p="automatic",...h}=e,x=(0,d.useDirection)(m),[g,b]=(0,c.useControllableState)({prop:s,onChange:i,defaultProp:o});return(0,a.jsx)(f,{scope:r,baseId:(0,u.useId)(),value:g,onValueChange:b,orientation:n,dir:x,activationMode:p,children:(0,a.jsx)(l.Primitive.div,{dir:x,"data-orientation":n,...h,ref:t})})});b.displayName=m;var j="TabsList",v=r.forwardRef((e,t)=>{let{__scopeTabs:r,loop:s=!0,...i}=e,n=g(j,r),d=x(r);return(0,a.jsx)(o.Root,{asChild:!0,...d,orientation:n.orientation,dir:n.dir,loop:s,children:(0,a.jsx)(l.Primitive.div,{role:"tablist","aria-orientation":n.orientation,...i,ref:t})})});v.displayName=j;var y="TabsTrigger",w=r.forwardRef((e,t)=>{let{__scopeTabs:r,value:i,disabled:n=!1,...d}=e,c=g(y,r),u=x(r),m=k(c.baseId,i),p=_(c.baseId,i),h=i===c.value;return(0,a.jsx)(o.Item,{asChild:!0,...u,focusable:!n,active:h,children:(0,a.jsx)(l.Primitive.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":p,"data-state":h?"active":"inactive","data-disabled":n?"":void 0,disabled:n,id:m,...d,ref:t,onMouseDown:(0,s.composeEventHandlers)(e.onMouseDown,e=>{n||0!==e.button||!1!==e.ctrlKey?e.preventDefault():c.onValueChange(i)}),onKeyDown:(0,s.composeEventHandlers)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&c.onValueChange(i)}),onFocus:(0,s.composeEventHandlers)(e.onFocus,()=>{let e="manual"!==c.activationMode;h||n||!e||c.onValueChange(i)})})})});w.displayName=y;var N="TabsContent",C=r.forwardRef((e,t)=>{let{__scopeTabs:s,value:i,forceMount:o,children:d,...c}=e,u=g(N,s),m=k(u.baseId,i),p=_(u.baseId,i),h=i===u.value,x=r.useRef(h);return r.useEffect(()=>{let e=requestAnimationFrame(()=>x.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,a.jsx)(n.Presence,{present:o||h,children:({present:r})=>(0,a.jsx)(l.Primitive.div,{"data-state":h?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":m,hidden:!r,id:p,tabIndex:0,...c,ref:t,style:{...e.style,animationDuration:x.current?"0s":void 0},children:r&&d})})});function k(e,t){return`${e}-trigger-${t}`}function _(e,t){return`${e}-content-${t}`}C.displayName=N;var T=e.i(47163);function A({className:e,...t}){return(0,a.jsx)(b,{"data-slot":"tabs",className:(0,T.cn)("flex flex-col gap-2",e),...t})}function S({className:e,...t}){return(0,a.jsx)(v,{"data-slot":"tabs-list",className:(0,T.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",e),...t})}function P({className:e,...t}){return(0,a.jsx)(w,{"data-slot":"tabs-trigger",className:(0,T.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t})}function E({className:e,...t}){return(0,a.jsx)(C,{"data-slot":"tabs-content",className:(0,T.cn)("flex-1 outline-none",e),...t})}e.s(["Tabs",()=>A,"TabsContent",()=>E,"TabsList",()=>S,"TabsTrigger",()=>P],27341);var I=e.i(47167),q=e.i(24632),$=e.i(9156);function D(){return"undefined"!=typeof window&&void 0!==window.document}$.parse,$.serialize;let M={path:"/",sameSite:"lax",httpOnly:!1,maxAge:3456e4},R=/^(.*)[.](0|[1-9][0-9]*)$/;function B(e,t){if(e===t)return!0;let a=e.match(R);return!!a&&a[1]===t}function L(e,t,a){let r=a??3180,s=encodeURIComponent(t);if(s.length<=r)return[{name:e,value:t}];let i=[];for(;s.length>0;){let e=s.slice(0,r),t=e.lastIndexOf("%");t>r-3&&(e=e.slice(0,t));let a="";for(;e.length>0;)try{a=decodeURIComponent(e);break}catch(t){if(t instanceof URIError&&"%"===e.at(-3)&&e.length>3)e=e.slice(0,e.length-3);else throw t}i.push(a),s=s.slice(e.length)}return i.map((t,a)=>({name:`${e}.${a}`,value:t}))}async function U(e,t){let a=await t(e);if(a)return a;let r=[];for(let a=0;;a++){let s=`${e}.${a}`,i=await t(s);if(!i)break;r.push(i)}return r.length>0?r.join(""):null}let O="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),H=" 	\n\r=".split(""),z=(()=>{let e=Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<H.length;t+=1)e[H[t].charCodeAt(0)]=-2;for(let t=0;t<O.length;t+=1)e[O[t].charCodeAt(0)]=t;return e})();function F(e){let t=[],a=0,r=0;if(function(e,t){for(let a=0;a<e.length;a+=1){let r=e.charCodeAt(a);if(r>55295&&r<=56319){let t=(r-55296)*1024&65535;r=(e.charCodeAt(a+1)-56320&65535|t)+65536,a+=1}!function(e,t){if(e<=127)return t(e);if(e<=2047){t(192|e>>6),t(128|63&e);return}if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|63&e);return}if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|63&e);return}throw Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}(r,t)}}(e,e=>{for(a=a<<8|e,r+=8;r>=6;){let e=a>>r-6&63;t.push(O[e]),r-=6}}),r>0)for(a<<=6-r,r=6;r>=6;){let e=a>>r-6&63;t.push(O[e]),r-=6}return t.join("")}function V(e){let t=[],a=e=>{t.push(String.fromCodePoint(e))},r={utf8seq:0,codepoint:0},s=0,i=0;for(let t=0;t<e.length;t+=1){let o=z[e.charCodeAt(t)];if(o>-1)for(s=s<<6|o,i+=6;i>=8;)(function(e,t,a){if(0===t.utf8seq){if(e<=127)return a(e);for(let a=1;a<6;a+=1)if((e>>7-a&1)==0){t.utf8seq=a;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else if(4===t.utf8seq)t.codepoint=7&e;else throw Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&a(t.codepoint)}})(s>>i-8&255,r,a),i-=8;else if(-2===o)continue;else throw Error(`Invalid Base64-URL character "${e.at(t)}" at position ${t}`)}return t.join("")}let K="base64-";async function W({getAll:e,setAll:t,setItems:a,removedItems:r},s){let i=s.cookieEncoding,o=s.cookieOptions??null,n=await e([...a?Object.keys(a):[],...r?Object.keys(r):[]]),l=n?.map(({name:e})=>e)||[],d=Object.keys(r).flatMap(e=>l.filter(t=>B(t,e))),c=Object.keys(a).flatMap(e=>{let t=new Set(l.filter(t=>B(t,e))),r=a[e];"base64url"===i&&(r=K+F(r));let s=L(e,r);return s.forEach(e=>{t.delete(e.name)}),d.push(...t),s}),u={...M,...o,maxAge:0},m={...M,...o,maxAge:M.maxAge};delete u.name,delete m.name,await t([...d.map(e=>({name:e,value:"",options:u})),...c.map(({name:e,value:t})=>({name:e,value:t,options:m}))])}function X(e,a,r){let s=r?.isSingleton===!0||(!r||!("isSingleton"in r))&&D();if(s&&t)return t;if(!e||!a)throw Error(`@supabase/ssr: Your project's URL and API key are required to create a Supabase client!

Check your Supabase project's API settings to find these values

https://supabase.com/dashboard/project/_/settings/api`);let{storage:i}=function(e,t){let a,r,s=e.cookies??null,i=e.cookieEncoding,o={},n={};if(s)if("get"in s){let e=async e=>{let t=e.flatMap(e=>[e,...Array.from({length:5}).map((t,a)=>`${e}.${a}`)]),a=[];for(let e=0;e<t.length;e+=1){let r=await s.get(t[e]);(r||"string"==typeof r)&&a.push({name:t[e],value:r})}return a};if(a=async t=>await e(t),"set"in s&&"remove"in s)r=async e=>{for(let t=0;t<e.length;t+=1){let{name:a,value:r,options:i}=e[t];r?await s.set(a,r,i):await s.remove(a,i)}};else if(t)r=async()=>{console.warn("@supabase/ssr: createServerClient was configured without set and remove cookie methods, but the client needs to set cookies. This can lead to issues such as random logouts, early session termination or increased token refresh requests. If in NextJS, check your middleware.ts file, route handlers and server actions for correctness. Consider switching to the getAll and setAll cookie methods instead of get, set and remove which are deprecated and can be difficult to use correctly.")};else throw Error("@supabase/ssr: createBrowserClient requires configuring a getAll and setAll cookie method (deprecated: alternatively both get, set and remove can be used)")}else if("getAll"in s)if(a=async()=>await s.getAll(),"setAll"in s)r=s.setAll;else if(t)r=async()=>{console.warn("@supabase/ssr: createServerClient was configured without the setAll cookie method, but the client needs to set cookies. This can lead to issues such as random logouts, early session termination or increased token refresh requests. If in NextJS, check your middleware.ts file, route handlers and server actions for correctness.")};else throw Error("@supabase/ssr: createBrowserClient requires configuring both getAll and setAll cookie methods (deprecated: alternatively both get, set and remove can be used)");else throw Error(`@supabase/ssr: ${t?"createServerClient":"createBrowserClient"} requires configuring getAll and setAll cookie methods (deprecated: alternatively use get, set and remove).${D()?" As this is called in a browser runtime, consider removing the cookies option object to use the document.cookie API automatically.":""}`);else if(!t&&D())a=()=>{let e;return Object.keys(e=(0,$.parse)(document.cookie)).map(t=>({name:t,value:e[t]??""}))},r=e=>{e.forEach(({name:e,value:t,options:a})=>{document.cookie=(0,$.serialize)(e,t,a)})};else if(t)throw Error("@supabase/ssr: createServerClient must be initialized with cookie options that specify getAll and setAll functions (deprecated, not recommended: alternatively use get, set and remove)");else a=()=>[],r=()=>{throw Error("@supabase/ssr: createBrowserClient in non-browser runtimes (including Next.js pre-rendering mode) was not initialized cookie options that specify getAll and setAll functions (deprecated: alternatively use get, set and remove), but they were needed")};return t?{getAll:a,setAll:r,setItems:o,removedItems:n,storage:{isServer:!0,getItem:async e=>{if("string"==typeof o[e])return o[e];if(n[e])return null;let t=await a([e]),r=await U(e,async e=>{let a=t?.find(({name:t})=>t===e)||null;return a?a.value:null});if(!r)return null;let s=r;return"string"==typeof r&&r.startsWith(K)&&(s=V(r.substring(K.length))),s},setItem:async(t,s)=>{t.endsWith("-code-verifier")&&await W({getAll:a,setAll:r,setItems:{[t]:s},removedItems:{}},{cookieOptions:e?.cookieOptions??null,cookieEncoding:i}),o[t]=s,delete n[t]},removeItem:async e=>{delete o[e],n[e]=!0}}}:{getAll:a,setAll:r,setItems:o,removedItems:n,storage:{isServer:!1,getItem:async e=>{let t=await a([e]),r=await U(e,async e=>{let a=t?.find(({name:t})=>t===e)||null;return a?a.value:null});if(!r)return null;let s=r;return r.startsWith(K)&&(s=V(r.substring(K.length))),s},setItem:async(t,s)=>{let o=await a([t]),n=new Set((o?.map(({name:e})=>e)||[]).filter(e=>B(e,t))),l=s;"base64url"===i&&(l=K+F(s));let d=L(t,l);d.forEach(({name:e})=>{n.delete(e)});let c={...M,...e?.cookieOptions,maxAge:0},u={...M,...e?.cookieOptions,maxAge:M.maxAge};delete c.name,delete u.name;let m=[...[...n].map(e=>({name:e,value:"",options:c})),...d.map(({name:e,value:t})=>({name:e,value:t,options:u}))];m.length>0&&await r(m)},removeItem:async t=>{let s=await a([t]),i=(s?.map(({name:e})=>e)||[]).filter(e=>B(e,t)),o={...M,...e?.cookieOptions,maxAge:0};delete o.name,i.length>0&&await r(i.map(e=>({name:e,value:"",options:o})))}}}}({...r,cookieEncoding:r?.cookieEncoding??"base64url"},!1),o=(0,q.createClient)(e,a,{...r,global:{...r?.global,headers:{...r?.global?.headers,"X-Client-Info":"supabase-ssr/0.7.0 createBrowserClient"}},auth:{...r?.auth,...r?.cookieOptions?.name?{storageKey:r.cookieOptions.name}:null,flowType:"pkce",autoRefreshToken:D(),detectSessionInUrl:D(),persistSession:!0,storage:i}});return s&&(t=o),o}e.s(["createBrowserClient",()=>X],72390),e.i(52683),e.s([],29225);let Y=new Map;async function G(e,t){if(Y.has(e))return console.log("[v0] Profile from session cache:",e),Y.get(e);let a=X(I.default.env.NEXT_PUBLIC_SUPABASE_URL,I.default.env.NEXT_PUBLIC_SUPABASE_ANON_KEY);try{let{data:t,error:r}=await a.from("profiles").select("discord_username, discord_avatar").eq("discord_id",e).single();if(!r&&t?.discord_username){console.log("[v0] Profile from Supabase:",e);let a={username:t.discord_username,avatar:t.discord_avatar||`https://cdn.discordapp.com/embed/avatars/${Number.parseInt(e)%5}.png`};return Y.set(e,a),a}}catch(e){console.error("[v0] Error checking Supabase profile:",e)}console.log("[v0] Fetching profile from Discord API:",e);try{let r=await fetch(`/api/guilds/${t}/members/${e}`);if(!r.ok)throw Error("Failed to fetch user");let s=await r.json(),i=s.user?.username||s.nick||"Utilisateur inconnu",o=s.user?.avatar?`https://cdn.discordapp.com/avatars/${e}/${s.user.avatar}.png`:`https://cdn.discordapp.com/embed/avatars/${Number.parseInt(e)%5}.png`,n={username:i,avatar:o};return await a.from("profiles").upsert({discord_id:e,discord_username:i,discord_avatar:o},{onConflict:"discord_id"}),Y.set(e,n),n}catch(t){return console.error("[v0] Error fetching Discord user:",e,t),{username:"Utilisateur inconnu",avatar:"https://cdn.discordapp.com/embed/avatars/0.png"}}}async function J(e,t){let a=new Map,r=[];for(let t of e)Y.has(t)?a.set(t,Y.get(t)):r.push(t);if(0===r.length)return console.log("[v0] All profiles from session cache"),a;let s=X(I.default.env.NEXT_PUBLIC_SUPABASE_URL,I.default.env.NEXT_PUBLIC_SUPABASE_ANON_KEY);try{let{data:e,error:i}=await s.from("profiles").select("discord_id, discord_username, discord_avatar").in("discord_id",r),o=[];if(!i&&e){for(let t of(console.log("[v0] Found profiles in Supabase:",e.length),e))if(t.discord_username){let e={username:t.discord_username,avatar:t.discord_avatar||`https://cdn.discordapp.com/embed/avatars/${Number.parseInt(t.discord_id)%5}.png`};a.set(t.discord_id,e),Y.set(t.discord_id,e)}for(let e of r)a.has(e)||o.push(e)}else o.push(...r);if(o.length>0){console.log("[v0] Fetching from Discord API:",o.length,"profiles");let e=o.map(e=>G(e,t)),r=await Promise.all(e);o.forEach((e,t)=>{a.set(e,r[t])})}}catch(e){console.error("[v0] Error in batch profile fetch:",e)}return a}e.s(["getDiscordProfiles",()=>J],30536)},87336,52754,67240,e=>{"use strict";var t=e.i(43476),a=e.i(71645),r=e.i(30030),s=e.i(48425),i="Progress",[o,n]=(0,r.createContextScope)(i),[l,d]=o(i),c=a.forwardRef((e,a)=>{var r,i;let{__scopeProgress:o,value:n=null,max:d,getValueLabel:c=p,...u}=e;(d||0===d)&&!f(d)&&console.error((r=`${d}`,`Invalid prop \`max\` of value \`${r}\` supplied to \`Progress\`. Only numbers greater than 0 are valid max values. Defaulting to \`100\`.`));let m=f(d)?d:100;null===n||g(n,m)||console.error((i=`${n}`,`Invalid prop \`value\` of value \`${i}\` supplied to \`Progress\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or 100 if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`));let b=g(n,m)?n:null,j=x(b)?c(b,m):void 0;return(0,t.jsx)(l,{scope:o,value:b,max:m,children:(0,t.jsx)(s.Primitive.div,{"aria-valuemax":m,"aria-valuemin":0,"aria-valuenow":x(b)?b:void 0,"aria-valuetext":j,role:"progressbar","data-state":h(b,m),"data-value":b??void 0,"data-max":m,...u,ref:a})})});c.displayName=i;var u="ProgressIndicator",m=a.forwardRef((e,a)=>{let{__scopeProgress:r,...i}=e,o=d(u,r);return(0,t.jsx)(s.Primitive.div,{"data-state":h(o.value,o.max),"data-value":o.value??void 0,"data-max":o.max,...i,ref:a})});function p(e,t){return`${Math.round(e/t*100)}%`}function h(e,t){return null==e?"indeterminate":e===t?"complete":"loading"}function x(e){return"number"==typeof e}function f(e){return x(e)&&!isNaN(e)&&e>0}function g(e,t){return x(e)&&!isNaN(e)&&e<=t&&e>=0}m.displayName=u;var b=e.i(47163);function j({className:e,value:a,...r}){return(0,t.jsx)(c,{"data-slot":"progress",className:(0,b.cn)("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",e),...r,children:(0,t.jsx)(m,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(a||0)}%)`}})})}e.s(["Progress",()=>j],87336);var v=e.i(75254);let y=(0,v.default)("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);e.s(["Wallet",()=>y],52754);let w=(0,v.default)("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);e.s(["RotateCcw",()=>w],67240)},43801,e=>{"use strict";var t=e.i(47167),a=e.i(43476),r=e.i(71645),s=e.i(70065),i=e.i(27341),o=e.i(94179),n=e.i(63270),l=e.i(87336),d=e.i(52754),c=e.i(75254);let u=(0,c.default)("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]),m=(0,c.default)("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]),p=(0,c.default)("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]);var h=e.i(31278),x=e.i(64030),f=e.i(3116);let g=(0,c.default)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),b=(0,c.default)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),j=(0,c.default)("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);var v=e.i(67240),y=e.i(67881),w=e.i(24632),N=e.i(30536);let C={booster_premium:{name:"Booster Premium",emoji:"ðŸŒŸ",description:"Booster avec taux doublÃ© de cartes rares et plus",category:"tcg",price:2e3},pack_duellistes:{name:"Pack Duellistes",emoji:"ðŸŽ¯",description:"5 cartes Valorant garanties",category:"tcg",price:5e3},pack_legendaire:{name:"Pack LÃ©gendaire",emoji:"ðŸŸ¨",description:"1 carte LÃ©gendaire ou Mythique garantie",category:"tcg",price:15e3},carte_protection:{name:"Protection de Carte",emoji:"ðŸ›¡ï¸",description:"ProtÃ¨ge une carte pendant 7 jours",category:"tcg",price:3e3,durationHours:168},bouclier_combat:{name:"Bouclier de Combat",emoji:"ðŸ”°",description:"Bloque tous les dÃ©fis pendant 24h",category:"combat",price:2e3,durationHours:24},potion_force:{name:"Potion de Force",emoji:"ðŸ’ª",description:"+10% de dÃ©gÃ¢ts pendant 24h",category:"combat",price:1500,durationHours:24},ticket_revanche:{name:"Ticket de Revanche",emoji:"ðŸ”„",description:"Rejoue un combat perdu (usage unique)",category:"combat",price:1e3},boost_salaire:{name:"Boost de Salaire",emoji:"ðŸ“ˆ",description:"+1 000 pq/jour pendant 7 jours (retour: 7k)",category:"economy",price:5e3,durationHours:168},boost_quete:{name:"Boost de QuÃªtes",emoji:"âš¡",description:"Progression de quÃªtes x2 pendant 7 jours",category:"economy",price:3e3,durationHours:168},assurance_pari:{name:"Assurance Pari",emoji:"ðŸ”’",description:"RÃ©cupÃ¨re 50% de ta mise si tu perds",category:"economy",price:1500},lootbox_bronze:{name:"Caisse Bronze",emoji:"ðŸŸ«",description:"RÃ©compenses alÃ©atoires (500-3 000 pq)",category:"lootbox",price:1500},lootbox_argent:{name:"Caisse Argent",emoji:"â¬œ",description:"RÃ©compenses alÃ©atoires (2 000-8 000 pq)",category:"lootbox",price:4e3},lootbox_or:{name:"Caisse Or",emoji:"ðŸŸ¨",description:"RÃ©compenses alÃ©atoires (5 000-25 000 pq)",category:"lootbox",price:1e4},lootbox_radiant:{name:"Caisse Radiant",emoji:"ðŸ’Ž",description:"RÃ©compenses alÃ©atoires (15 000-100 000 pq)",category:"lootbox",price:35e3},ticket_loterie:{name:"Ticket de Loterie",emoji:"ðŸŽŸï¸",description:"Participe au tirage hebdomadaire (dim. 21h)",category:"lottery",price:1e3},compagnon_spike:{name:"Petit Spike",emoji:"ðŸ’£",description:"Compagnon â€” +500 pq/jour passif",category:"companion",price:5e3,bonus:{dailyEcus:500}},compagnon_phoenix:{name:"Phoenix Jr",emoji:"ðŸ”¥",description:"Compagnon â€” +15% dÃ©gÃ¢ts en combat TCG",category:"companion",price:8e3,bonus:{combatDmg:15}},compagnon_sage:{name:"Sage Bot",emoji:"ðŸ’š",description:"Compagnon â€” +2 boosters gratuits par jour",category:"companion",price:1e4,bonus:{freeBooster:2}},compagnon_omen:{name:"Omen Shadow",emoji:"ðŸ‘¤",description:"Compagnon â€” 800 pq/jour + 15% chance loot",category:"companion",price:15e3,bonus:{dailyEcus:800,lootLuck:15}},compagnon_radiant:{name:"Renard Radiant",emoji:"ðŸ¦Š",description:"Compagnon LÃ‰GENDAIRE â€” 2 000 pq/jour + 25% loot",category:"companion",price:3e4,bonus:{dailyEcus:2e3,lootLuck:25}},pass_vip:{name:"Pass VIP",emoji:"â­",description:"RÃ´le VIP + 1 500 pq/jour (30j = 45k retour)",category:"pass",price:12e3,durationHours:720,roleKey:"vip",roleName:"â­ VIP"},pass_premium:{name:"Pass Premium",emoji:"ðŸ’Ž",description:"RÃ´le Premium + 3 000 pq/jour + boosts (30j = 90k)",category:"pass",price:3e4,durationHours:720,roleKey:"premium",roleName:"ðŸ’Ž Premium"},pass_radiant:{name:"Pass Radiant",emoji:"ðŸŒŸ",description:"RÃ´le Radiant + 6 000 pq/jour + TOUS les bonus (30j = 180k)",category:"pass",price:6e4,durationHours:720,roleKey:"radiant",roleName:"ðŸŒŸ Radiant"}},k={tcg:{name:"TCG",emoji:"ðŸƒ",description:"Boosters, packs et protections"},combat:{name:"Combat",emoji:"âš”ï¸",description:"Items pour les combats TCG"},economy:{name:"Ã‰conomie",emoji:"ðŸ’°",description:"Boosts de revenus et assurances"},lootbox:{name:"Lootbox",emoji:"ðŸ“¦",description:"Caisses mystÃ¨res Ã  ouvrir"},companion:{name:"Compagnons",emoji:"ðŸ¾",description:"Petits alliÃ©s avec bonus passifs"},pass:{name:"Pass",emoji:"ðŸ‘‘",description:"RÃ´les Discord + bonus exclusifs"},lottery:{name:"Loterie",emoji:"ðŸŽŸï¸",description:"Tickets pour le tirage du dimanche"}};function _(e){return e.toLocaleString("fr-FR")}function T(){let e=new Date,t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()));t.setUTCDate(t.getUTCDate()+4-(t.getUTCDay()||7));let a=new Date(Date.UTC(t.getUTCFullYear(),0,1)),r=Math.ceil(((t.getTime()-a.getTime())/864e5+1)/7);return`${t.getUTCFullYear()}-W${String(r).padStart(2,"0")}`}function A(){let[e,c]=(0,r.useState)(!0),[A,S]=(0,r.useState)(null),[P,E]=(0,r.useState)([]),[I,q]=(0,r.useState)([]),[$,D]=(0,r.useState)({totalBalance:0,totalLoans:0,walletCount:0}),[M,R]=(0,r.useState)("tcg"),[B,L]=(0,r.useState)([]),[U,O]=(0,r.useState)([]),[H,z]=(0,r.useState)([]),[F,V]=(0,r.useState)([]),[K,W]=(0,r.useState)({totalTickets:0,totalPot:0,participants:0}),[X,Y]=(0,r.useState)(new Map),[G,J]=(0,r.useState)(0),[Z,Q]=(0,r.useState)(null),[ee,et]=(0,r.useState)(null),[ea,er]=(0,r.useState)([]),es=(0,r.useMemo)(()=>(0,w.createClient)(t.default.env.NEXT_PUBLIC_SUPABASE_URL,t.default.env.NEXT_PUBLIC_SUPABASE_ANON_KEY),[]);(0,r.useEffect)(()=>{let e=localStorage.getItem("selected_guild");(S(e),e)?async function(){let{data:t}=await es.from("user_wallets").select("user_id, balance, loan_amount").eq("guild_id",e).order("balance",{ascending:!1}).limit(15);t&&(E(t),D({totalBalance:t.reduce((e,t)=>e+(t.balance||0),0),totalLoans:t.reduce((e,t)=>e+(t.loan_amount||0),0),walletCount:t.length}));let{data:a}=await es.from("shop_purchase_log").select("*").eq("guild_id",e).order("purchased_at",{ascending:!1}).limit(20);a&&q(a);let r=new Date().toISOString(),{data:s}=await es.from("shop_market_rotation").select("*").eq("guild_id",e).gt("expires_at",r).lte("starts_at",r).order("id");s&&L(s);let{data:i}=await es.from("shop_user_inventory").select("item_key, user_id, used").eq("guild_id",e).eq("used",!1);if(i){let e={},t={};for(let a of i)e[a.item_key]=(e[a.item_key]||0)+1,t[a.user_id]=(t[a.user_id]||0)+1;O(Object.entries(e).map(([e,t])=>({key:e,count:t,item:C[e]})).filter(e=>e.item).sort((e,t)=>t.count-e.count)),z(Object.entries(t).map(([e,t])=>({userId:e,count:t})).sort((e,t)=>t.count-e.count).slice(0,10))}let o=T(),{data:n}=await es.from("shop_lottery").select("user_id, tickets").eq("guild_id",e).eq("week",o);if(n){let e=[...n].sort((e,t)=>t.tickets-e.tickets);V(e);let t=e.reduce((e,t)=>e+t.tickets,0);W({totalTickets:t,totalPot:1e3*t,participants:e.length})}let l=new Set;if(t?.forEach(e=>l.add(e.user_id)),a?.forEach(e=>l.add(e.user_id)),n?.forEach(e=>l.add(e.user_id)),i?.forEach(e=>l.add(e.user_id)),l.size>0&&e)try{let t=await (0,N.getDiscordProfiles)(Array.from(l),e);Y(t)}catch{}c(!1)}():c(!1)},[es]);let ei=(0,r.useCallback)(async e=>{try{let t=await fetch(`/api/casino/balance?guildId=${e}`);if(t.ok){let e=await t.json();J(e.balance)}}catch{}},[]),eo=(0,r.useCallback)(async e=>{try{let t=await fetch(`/api/casino/shop?guildId=${e}`);if(t.ok){let e=await t.json();er(e.inventory||[])}}catch{}},[]);async function en(e){if(A&&!Z){Q(e),et(null);try{let t=await fetch("/api/casino/shop",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({guildId:A,itemKey:e})}),a=await t.json();t.ok?(et({text:`âœ… ${a.itemName} achet\xe9 !`,ok:!0}),J(a.newBalance),eo(A)):et({text:a.error||"Erreur",ok:!1})}catch{et({text:"Erreur rÃ©seau",ok:!1})}Q(null),setTimeout(()=>et(null),4e3)}}function el(e){return X.get(e)?.username||"Utilisateur"}function ed(e){return X.get(e)?.avatar||"https://cdn.discordapp.com/embed/avatars/0.png"}if((0,r.useEffect)(()=>{A&&(ei(A),eo(A))},[A,ei,eo]),e)return(0,a.jsx)("div",{className:"flex h-96 items-center justify-center",children:(0,a.jsx)(h.Loader2,{className:"h-8 w-8 animate-spin text-primary"})});if(!A)return(0,a.jsx)("div",{className:"flex h-96 items-center justify-center text-muted-foreground",children:"SÃ©lectionne un serveur pour voir l'Ã©conomie"});let ec=Object.entries(C).filter(([,e])=>e.category===M),eu=new Date,em=(7-eu.getDay())%7||7,ep=new Date(eu);ep.setDate(eu.getDate()+em),ep.setHours(21,0,0,0);let eh=ep.getTime()-eu.getTime(),ex=Math.floor(eh/864e5),ef=Math.floor(eh%864e5/36e5);return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"Ã‰conomie"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Portefeuilles, boutique, inventaire et loterie du serveur"})]}),(0,a.jsx)(s.Card,{className:"border-border bg-gradient-to-r from-amber-500/10 to-yellow-500/10 sm:w-auto",children:(0,a.jsxs)(s.CardContent,{className:"flex items-center gap-3 p-4",children:[(0,a.jsx)(d.Wallet,{className:"h-5 w-5 text-amber-500"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Ton solde"}),(0,a.jsxs)("p",{className:"text-xl font-bold text-amber-500",children:[_(G)," pq"]})]}),(0,a.jsx)(y.Button,{variant:"ghost",size:"icon",className:"ml-2 h-8 w-8",onClick:()=>A&&ei(A),children:(0,a.jsx)(v.RotateCcw,{className:"h-4 w-4"})})]})})]}),ee&&(0,a.jsx)("div",{className:`rounded-lg p-3 text-sm font-medium ${ee.ok?"bg-emerald-500/10 text-emerald-400 border border-emerald-500/30":"bg-red-500/10 text-red-400 border border-red-500/30"}`,children:ee.text}),(0,a.jsxs)(i.Tabs,{defaultValue:"wallet",className:"w-full",children:[(0,a.jsxs)(i.TabsList,{className:"grid w-full grid-cols-4",children:[(0,a.jsxs)(i.TabsTrigger,{value:"wallet",className:"gap-2",children:[(0,a.jsx)(d.Wallet,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Portefeuille"})]}),(0,a.jsxs)(i.TabsTrigger,{value:"shop",className:"gap-2",children:[(0,a.jsx)(u,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Boutique"})]}),(0,a.jsxs)(i.TabsTrigger,{value:"inventory",className:"gap-2",children:[(0,a.jsx)(m,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Inventaire"})]}),(0,a.jsxs)(i.TabsTrigger,{value:"lottery",className:"gap-2",children:[(0,a.jsx)(p,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Loterie"})]})]}),(0,a.jsxs)(i.TabsContent,{value:"wallet",className:"mt-6 space-y-6",children:[(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,a.jsxs)(s.Card,{className:"border-border bg-card",children:[(0,a.jsxs)(s.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,a.jsx)(s.CardTitle,{className:"text-sm font-medium",children:"Ã‰conomie totale"}),(0,a.jsx)(g,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(s.CardContent,{children:[(0,a.jsxs)("p",{className:"text-2xl font-bold text-emerald-500",children:[_($.totalBalance)," pq"]}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:[$.walletCount," portefeuilles"]})]})]}),(0,a.jsxs)(s.Card,{className:"border-border bg-card",children:[(0,a.jsxs)(s.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,a.jsx)(s.CardTitle,{className:"text-sm font-medium",children:"PrÃªts en cours"}),(0,a.jsx)(b,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(s.CardContent,{children:[(0,a.jsxs)("p",{className:"text-2xl font-bold text-amber-500",children:[_($.totalLoans)," pq"]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"CrÃ©dits actifs"})]})]}),(0,a.jsxs)(s.Card,{className:"border-border bg-card",children:[(0,a.jsxs)(s.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,a.jsx)(s.CardTitle,{className:"text-sm font-medium",children:"Achats rÃ©cents"}),(0,a.jsx)(u,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(s.CardContent,{children:[(0,a.jsx)("p",{className:"text-2xl font-bold",children:I.length}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"DerniÃ¨res transactions"})]})]})]}),(0,a.jsxs)("div",{className:"grid gap-6 lg:grid-cols-2",children:[(0,a.jsxs)(s.Card,{className:"border-border bg-card",children:[(0,a.jsxs)(s.CardHeader,{children:[(0,a.jsxs)(s.CardTitle,{className:"flex items-center gap-2",children:[(0,a.jsx)(x.Trophy,{className:"h-5 w-5 text-yellow-500"}),"Top Richesses"]}),(0,a.jsx)(s.CardDescription,{children:"Les joueurs les plus riches du serveur"})]}),(0,a.jsx)(s.CardContent,{children:0===P.length?(0,a.jsx)("p",{className:"py-8 text-center text-muted-foreground",children:"Aucune donnÃ©e"}):(0,a.jsx)("div",{className:"space-y-3",children:P.slice(0,10).map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center gap-3 rounded-2xl bg-muted/50 p-3 transition-all hover:bg-muted",children:[(0,a.jsxs)("div",{className:`flex h-10 w-10 shrink-0 items-center justify-center rounded-xl font-bold text-sm ${0===t?"bg-yellow-500/20 text-yellow-500":1===t?"bg-gray-400/20 text-gray-400":2===t?"bg-orange-600/20 text-orange-600":"bg-primary/10 text-primary"}`,children:["#",t+1]}),(0,a.jsxs)(n.Avatar,{className:"h-10 w-10 border-2 border-border",children:[(0,a.jsx)(n.AvatarImage,{src:ed(e.user_id)}),(0,a.jsx)(n.AvatarFallback,{children:el(e.user_id)[0]?.toUpperCase()})]}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"font-semibold text-foreground truncate",children:el(e.user_id)}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:[_(e.balance)," pq"]})]}),e.loan_amount>0&&(0,a.jsxs)(o.Badge,{variant:"outline",className:"text-amber-500 border-amber-500/30 shrink-0",children:["PrÃªt: ",_(e.loan_amount)]})]},e.user_id))})})]}),(0,a.jsxs)(s.Card,{className:"border-border bg-card",children:[(0,a.jsxs)(s.CardHeader,{children:[(0,a.jsxs)(s.CardTitle,{className:"flex items-center gap-2",children:[(0,a.jsx)(f.Clock,{className:"h-5 w-5 text-blue-500"}),"Achats rÃ©cents"]}),(0,a.jsx)(s.CardDescription,{children:"DerniÃ¨res transactions boutique"})]}),(0,a.jsx)(s.CardContent,{children:0===I.length?(0,a.jsx)("p",{className:"py-8 text-center text-muted-foreground",children:"Aucun achat"}):(0,a.jsx)("div",{className:"space-y-2 max-h-[500px] overflow-y-auto pr-1",children:I.map((e,t)=>{let r=C[e.item_key],s=new Date(e.purchased_at);return(0,a.jsxs)("div",{className:"flex items-center gap-3 rounded-xl bg-muted/30 p-3",children:[(0,a.jsx)("span",{className:"text-xl",children:r?.emoji||"ðŸ“¦"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"font-medium text-foreground text-sm truncate",children:e.item_name}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:el(e.user_id)})]}),(0,a.jsxs)("div",{className:"text-right shrink-0",children:[(0,a.jsxs)("p",{className:"text-sm font-semibold text-red-400",children:["-",_(e.price)," pq"]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:s.toLocaleDateString("fr-FR",{day:"numeric",month:"short"})})]})]},e.id||t)})})})]})]})]}),(0,a.jsxs)(i.TabsContent,{value:"shop",className:"mt-6 space-y-6",children:[(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:Object.entries(k).map(([e,t])=>(0,a.jsxs)("button",{onClick:()=>R(e),className:`inline-flex items-center gap-2 rounded-full px-4 py-2 text-sm font-medium transition-all ${M===e?"bg-primary text-primary-foreground shadow-lg shadow-primary/25":"bg-muted/50 text-muted-foreground hover:bg-muted hover:text-foreground"}`,children:[(0,a.jsx)("span",{children:t.emoji}),t.name]},e))}),(0,a.jsx)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:ec.map(([e,t])=>(0,a.jsx)(s.Card,{className:"border-border bg-card transition-all hover:border-primary/30 hover:shadow-lg hover:shadow-primary/5",children:(0,a.jsx)(s.CardContent,{className:"p-5",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"flex h-12 w-12 shrink-0 items-center justify-center rounded-2xl bg-primary/10 text-2xl",children:t.emoji}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h3",{className:"font-semibold text-foreground",children:t.name}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mt-0.5",children:t.description}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-3 flex-wrap",children:[(0,a.jsxs)(o.Badge,{className:"bg-emerald-500/10 text-emerald-500 border-emerald-500/20",children:[_(t.price)," pq"]}),t.durationHours&&(0,a.jsxs)(o.Badge,{variant:"outline",className:"text-muted-foreground",children:[(0,a.jsx)(f.Clock,{className:"mr-1 h-3 w-3"}),t.durationHours>=168?`${Math.floor(t.durationHours/24)}j`:`${t.durationHours}h`]})]}),(0,a.jsxs)(y.Button,{size:"sm",className:"mt-3 gap-1 w-full bg-gradient-to-r from-emerald-600 to-emerald-500 hover:from-emerald-500 hover:to-emerald-400",disabled:Z===e||G<t.price,onClick:()=>en(e),children:[Z===e?(0,a.jsx)(h.Loader2,{className:"h-3 w-3 animate-spin"}):(0,a.jsx)(u,{className:"h-3 w-3"}),"Acheter"]})]})]})})},e))}),(0,a.jsxs)(s.Card,{className:"border-border bg-gradient-to-br from-card to-purple-500/5",children:[(0,a.jsxs)(s.CardHeader,{children:[(0,a.jsxs)(s.CardTitle,{className:"flex items-center gap-2",children:[(0,a.jsx)(j,{className:"h-5 w-5 text-purple-400"}),"MarchÃ© Noir"]}),(0,a.jsx)(s.CardDescription,{children:"Deals Ã  durÃ©e limitÃ©e avec rÃ©ductions exclusives"})]}),(0,a.jsx)(s.CardContent,{children:0===B.length?(0,a.jsx)("p",{className:"py-6 text-center text-muted-foreground",children:"Aucun deal actif â€” Le marchÃ© noir se renouvelle toutes les 12h"}):(0,a.jsx)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:B.map(e=>{let t=C[e.item_key];if(!t)return null;let r=Math.floor(t.price*(1-e.discount_pct/100)),s=Math.max(0,(e.stock-e.sold)/e.stock*100),i=new Date(e.expires_at).getTime()-Date.now(),n=Math.max(0,Math.floor(i/36e5)),d=Math.max(0,Math.floor(i%36e5/6e4));return(0,a.jsxs)("div",{className:"rounded-2xl border border-purple-500/20 bg-purple-500/5 p-4 space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{className:"text-2xl",children:t.emoji}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"font-semibold text-foreground",children:t.name}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,a.jsxs)("span",{className:"text-sm font-bold text-emerald-400",children:[_(r)," pq"]}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground line-through",children:_(t.price)}),(0,a.jsxs)(o.Badge,{className:"bg-red-500/10 text-red-400 border-red-500/20",children:["-",e.discount_pct,"%"]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-1.5",children:[(0,a.jsxs)("div",{className:"flex justify-between text-xs text-muted-foreground",children:[(0,a.jsxs)("span",{children:["Stock: ",e.stock-e.sold,"/",e.stock]}),(0,a.jsxs)("span",{children:[n,"h ",d,"m restantes"]})]}),(0,a.jsx)(l.Progress,{value:s,className:"h-1.5"})]})]},e.id)})})})]})]}),(0,a.jsx)(i.TabsContent,{value:"inventory",className:"mt-6 space-y-6",children:(0,a.jsxs)("div",{className:"grid gap-6 lg:grid-cols-2",children:[(0,a.jsxs)(s.Card,{className:"border-border bg-card",children:[(0,a.jsxs)(s.CardHeader,{children:[(0,a.jsxs)(s.CardTitle,{className:"flex items-center gap-2",children:[(0,a.jsx)(m,{className:"h-5 w-5 text-blue-500"}),"Items en circulation"]}),(0,a.jsx)(s.CardDescription,{children:"Items actifs (non utilisÃ©s) sur le serveur"})]}),(0,a.jsx)(s.CardContent,{children:0===U.length?(0,a.jsx)("p",{className:"py-8 text-center text-muted-foreground",children:"Aucun item en circulation"}):(0,a.jsx)("div",{className:"space-y-2 max-h-[500px] overflow-y-auto pr-1",children:U.map(({key:e,count:t,item:r})=>(0,a.jsxs)("div",{className:"flex items-center gap-3 rounded-xl bg-muted/30 p-3",children:[(0,a.jsx)("span",{className:"text-xl",children:r.emoji}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"font-medium text-foreground text-sm",children:r.name}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:k[r.category]?.name})]}),(0,a.jsxs)(o.Badge,{className:"bg-primary/10 text-primary border-primary/20",children:["Ã—",t]})]},e))})})]}),(0,a.jsxs)(s.Card,{className:"border-border bg-card",children:[(0,a.jsxs)(s.CardHeader,{children:[(0,a.jsxs)(s.CardTitle,{className:"flex items-center gap-2",children:[(0,a.jsx)(x.Trophy,{className:"h-5 w-5 text-yellow-500"}),"Top Collectionneurs"]}),(0,a.jsx)(s.CardDescription,{children:"Joueurs avec le plus d'items non utilisÃ©s"})]}),(0,a.jsx)(s.CardContent,{children:0===H.length?(0,a.jsx)("p",{className:"py-8 text-center text-muted-foreground",children:"Aucune donnÃ©e"}):(0,a.jsx)("div",{className:"space-y-3",children:H.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center gap-3 rounded-2xl bg-muted/50 p-3 transition-all hover:bg-muted",children:[(0,a.jsxs)("div",{className:`flex h-10 w-10 shrink-0 items-center justify-center rounded-xl font-bold text-sm ${0===t?"bg-yellow-500/20 text-yellow-500":1===t?"bg-gray-400/20 text-gray-400":2===t?"bg-orange-600/20 text-orange-600":"bg-primary/10 text-primary"}`,children:["#",t+1]}),(0,a.jsxs)(n.Avatar,{className:"h-10 w-10 border-2 border-border",children:[(0,a.jsx)(n.AvatarImage,{src:ed(e.userId)}),(0,a.jsx)(n.AvatarFallback,{children:el(e.userId)[0]?.toUpperCase()})]}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"font-semibold text-foreground truncate",children:el(e.userId)}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:[e.count," items"]})]})]},e.userId))})})]})]})}),(0,a.jsxs)(i.TabsContent,{value:"lottery",className:"mt-6 space-y-6",children:[(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-4",children:[(0,a.jsxs)(s.Card,{className:"border-border bg-gradient-to-br from-card to-amber-500/5",children:[(0,a.jsx)(s.CardHeader,{className:"pb-2",children:(0,a.jsx)(s.CardTitle,{className:"text-sm font-medium",children:"ðŸ’° Cagnotte"})}),(0,a.jsx)(s.CardContent,{children:(0,a.jsxs)("p",{className:"text-2xl font-bold text-amber-500",children:[_(K.totalPot)," pq"]})})]}),(0,a.jsxs)(s.Card,{className:"border-border bg-card",children:[(0,a.jsx)(s.CardHeader,{className:"pb-2",children:(0,a.jsx)(s.CardTitle,{className:"text-sm font-medium",children:"ðŸŽ« Tickets"})}),(0,a.jsx)(s.CardContent,{children:(0,a.jsx)("p",{className:"text-2xl font-bold",children:K.totalTickets})})]}),(0,a.jsxs)(s.Card,{className:"border-border bg-card",children:[(0,a.jsx)(s.CardHeader,{className:"pb-2",children:(0,a.jsx)(s.CardTitle,{className:"text-sm font-medium",children:"ðŸ‘¥ Participants"})}),(0,a.jsx)(s.CardContent,{children:(0,a.jsx)("p",{className:"text-2xl font-bold",children:K.participants})})]}),(0,a.jsxs)(s.Card,{className:"border-border bg-card",children:[(0,a.jsx)(s.CardHeader,{className:"pb-2",children:(0,a.jsx)(s.CardTitle,{className:"text-sm font-medium",children:"â° Tirage"})}),(0,a.jsxs)(s.CardContent,{children:[(0,a.jsxs)("p",{className:"text-2xl font-bold",children:[ex,"j ",ef,"h"]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Dimanche 21h"})]})]})]}),(0,a.jsxs)("div",{className:"grid gap-6 lg:grid-cols-2",children:[(0,a.jsxs)(s.Card,{className:"border-border bg-gradient-to-br from-card to-yellow-500/5",children:[(0,a.jsx)(s.CardHeader,{children:(0,a.jsx)(s.CardTitle,{children:"ðŸ† RÃ©partition des gains"})}),(0,a.jsx)(s.CardContent,{className:"space-y-4",children:[{rank:"ðŸ¥‡ 1er",pct:70,color:"bg-yellow-500"},{rank:"ðŸ¥ˆ 2e",pct:20,color:"bg-gray-400"},{rank:"ðŸ¥‰ 3e",pct:10,color:"bg-orange-600"}].map(({rank:e,pct:t,color:r})=>(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"font-medium",children:e}),(0,a.jsxs)("span",{className:"text-muted-foreground font-semibold",children:[_(Math.floor(K.totalPot*t/100))," pq (",t,"%)"]})]}),(0,a.jsx)("div",{className:"h-2 rounded-full bg-muted overflow-hidden",children:(0,a.jsx)("div",{className:`h-full rounded-full ${r} transition-all`,style:{width:`${t}%`}})})]},e))})]}),(0,a.jsxs)(s.Card,{className:"border-border bg-card",children:[(0,a.jsxs)(s.CardHeader,{children:[(0,a.jsxs)(s.CardTitle,{className:"flex items-center gap-2",children:[(0,a.jsx)(p,{className:"h-5 w-5 text-purple-500"}),"Classement tickets"]}),(0,a.jsxs)(s.CardDescription,{children:["Semaine ",T()]})]}),(0,a.jsx)(s.CardContent,{children:0===F.length?(0,a.jsx)("p",{className:"py-8 text-center text-muted-foreground",children:"Aucun participant cette semaine"}):(0,a.jsx)("div",{className:"space-y-3",children:F.slice(0,10).map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center gap-3 rounded-2xl bg-muted/50 p-3 transition-all hover:bg-muted",children:[(0,a.jsxs)("div",{className:`flex h-10 w-10 shrink-0 items-center justify-center rounded-xl font-bold text-sm ${0===t?"bg-yellow-500/20 text-yellow-500":1===t?"bg-gray-400/20 text-gray-400":2===t?"bg-orange-600/20 text-orange-600":"bg-primary/10 text-primary"}`,children:["#",t+1]}),(0,a.jsxs)(n.Avatar,{className:"h-10 w-10 border-2 border-border",children:[(0,a.jsx)(n.AvatarImage,{src:ed(e.user_id)}),(0,a.jsx)(n.AvatarFallback,{children:el(e.user_id)[0]?.toUpperCase()})]}),(0,a.jsx)("div",{className:"flex-1 min-w-0",children:(0,a.jsx)("p",{className:"font-semibold text-foreground truncate",children:el(e.user_id)})}),(0,a.jsxs)(o.Badge,{className:"bg-purple-500/10 text-purple-400 border-purple-500/20",children:["ðŸŽ« ",e.tickets," ticket",e.tickets>1?"s":""]})]},e.user_id))})})]})]})]})]})]})}e.s(["default",()=>A],43801)}]);