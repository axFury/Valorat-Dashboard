(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,23750,e=>{"use strict";var t=e.i(43476),r=e.i(47163);function a({className:e,type:a,...s}){return(0,t.jsx)("input",{type:a,"data-slot":"input",className:(0,r.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...s})}e.s(["Input",()=>a])},70065,e=>{"use strict";var t=e.i(43476),r=e.i(47163);function a({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card",className:(0,r.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...a})}function s({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,r.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...a})}function i({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,r.cn)("leading-none font-semibold",e),...a})}function n({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-description",className:(0,r.cn)("text-muted-foreground text-sm",e),...a})}function l({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,r.cn)("px-6",e),...a})}e.s(["Card",()=>a,"CardContent",()=>l,"CardDescription",()=>n,"CardHeader",()=>s,"CardTitle",()=>i])},31278,e=>{"use strict";let t=(0,e.i(75254).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],31278)},3116,e=>{"use strict";let t=(0,e.i(75254).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);e.s(["Clock",()=>t],3116)},61911,e=>{"use strict";let t=(0,e.i(75254).default)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);e.s(["Users",()=>t],61911)},9156,(e,t,r)=>{"use strict";let a;Object.defineProperty(r,"__esModule",{value:!0}),r.parseCookie=u,r.parse=u,r.stringifyCookie=function(e,t){let r=t?.encode||encodeURIComponent,a=[];for(let t of Object.keys(e)){let n=e[t];if(void 0===n)continue;if(!s.test(t))throw TypeError(`cookie name is invalid: ${t}`);let l=r(n);if(!i.test(l))throw TypeError(`cookie val is invalid: ${n}`);a.push(`${t}=${l}`)}return a.join("; ")},r.stringifySetCookie=m,r.serialize=m,r.parseSetCookie=function(e,t){let r=t?.decode||f,a=e.length,s=p(e,0,a),i=x(e,0,s),n=-1===i?{name:"",value:r(h(e,0,s))}:{name:h(e,0,i),value:r(h(e,i+1,s))},l=s+1;for(;l<a;){let t=p(e,l,a),r=x(e,l,t),s=-1===r?h(e,l,t):h(e,l,r),i=-1===r?void 0:h(e,r+1,t);switch(s.toLowerCase()){case"httponly":n.httpOnly=!0;break;case"secure":n.secure=!0;break;case"partitioned":n.partitioned=!0;break;case"domain":n.domain=i;break;case"path":n.path=i;break;case"max-age":i&&o.test(i)&&(n.maxAge=Number(i));break;case"expires":if(!i)break;let d=new Date(i);Number.isFinite(d.valueOf())&&(n.expires=d);break;case"priority":if(!i)break;let c=i.toLowerCase();("low"===c||"medium"===c||"high"===c)&&(n.priority=c);break;case"samesite":if(!i)break;let u=i.toLowerCase();("lax"===u||"strict"===u||"none"===u)&&(n.sameSite=u)}l=t+1}return n},r.stringifySetCookie=m,r.serialize=m;let s=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,i=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,l=/^[\u0020-\u003A\u003D-\u007E]*$/,o=/^-?\d+$/,d=Object.prototype.toString,c=((a=function(){}).prototype=Object.create(null),a);function u(e,t){let r=new c,a=e.length;if(a<2)return r;let s=t?.decode||f,i=0;do{let t=x(e,i,a);if(-1===t)break;let n=p(e,i,a);if(t>n){i=e.lastIndexOf(";",t-1)+1;continue}let l=h(e,i,t);void 0===r[l]&&(r[l]=s(h(e,t+1,n))),i=n+1}while(i<a)return r}function m(e,t,r){let a="object"==typeof e?e:{...r,name:e,value:String(t)},o=("object"==typeof t?t:r)?.encode||encodeURIComponent;if(!s.test(a.name))throw TypeError(`argument name is invalid: ${a.name}`);let c=a.value?o(a.value):"";if(!i.test(c))throw TypeError(`argument val is invalid: ${a.value}`);let u=a.name+"="+c;if(void 0!==a.maxAge){if(!Number.isInteger(a.maxAge))throw TypeError(`option maxAge is invalid: ${a.maxAge}`);u+="; Max-Age="+a.maxAge}if(a.domain){if(!n.test(a.domain))throw TypeError(`option domain is invalid: ${a.domain}`);u+="; Domain="+a.domain}if(a.path){if(!l.test(a.path))throw TypeError(`option path is invalid: ${a.path}`);u+="; Path="+a.path}if(a.expires){var m;if(m=a.expires,"[object Date]"!==d.call(m)||!Number.isFinite(a.expires.valueOf()))throw TypeError(`option expires is invalid: ${a.expires}`);u+="; Expires="+a.expires.toUTCString()}if(a.httpOnly&&(u+="; HttpOnly"),a.secure&&(u+="; Secure"),a.partitioned&&(u+="; Partitioned"),a.priority)switch("string"==typeof a.priority?a.priority.toLowerCase():void 0){case"low":u+="; Priority=Low";break;case"medium":u+="; Priority=Medium";break;case"high":u+="; Priority=High";break;default:throw TypeError(`option priority is invalid: ${a.priority}`)}if(a.sameSite)switch("string"==typeof a.sameSite?a.sameSite.toLowerCase():a.sameSite){case!0:case"strict":u+="; SameSite=Strict";break;case"lax":u+="; SameSite=Lax";break;case"none":u+="; SameSite=None";break;default:throw TypeError(`option sameSite is invalid: ${a.sameSite}`)}return u}function p(e,t,r){let a=e.indexOf(";",t);return -1===a?r:a}function x(e,t,r){let a=e.indexOf("=",t);return a<r?a:-1}function h(e,t,r){let a=t,s=r;do{let t=e.charCodeAt(a);if(32!==t&&9!==t)break}while(++a<s)for(;s>a;){let t=e.charCodeAt(s-1);if(32!==t&&9!==t)break;s--}return e.slice(a,s)}function f(e){if(-1===e.indexOf("%"))return e;try{return decodeURIComponent(e)}catch(t){return e}}},52683,(e,t,r)=>{},27341,72390,29225,30536,e=>{"use strict";let t;var r=e.i(43476),a=e.i(71645),s=e.i(81140),i=e.i(30030),n=e.i(42727),l=e.i(96626),o=e.i(48425),d=e.i(86318),c=e.i(69340),u=e.i(10772),m="Tabs",[p,x]=(0,i.createContextScope)(m,[n.createRovingFocusGroupScope]),h=(0,n.createRovingFocusGroupScope)(),[f,b]=p(m),g=a.forwardRef((e,t)=>{let{__scopeTabs:a,value:s,onValueChange:i,defaultValue:n,orientation:l="horizontal",dir:m,activationMode:p="automatic",...x}=e,h=(0,d.useDirection)(m),[b,g]=(0,c.useControllableState)({prop:s,onChange:i,defaultProp:n});return(0,r.jsx)(f,{scope:a,baseId:(0,u.useId)(),value:b,onValueChange:g,orientation:l,dir:h,activationMode:p,children:(0,r.jsx)(o.Primitive.div,{dir:h,"data-orientation":l,...x,ref:t})})});g.displayName=m;var v="TabsList",j=a.forwardRef((e,t)=>{let{__scopeTabs:a,loop:s=!0,...i}=e,l=b(v,a),d=h(a);return(0,r.jsx)(n.Root,{asChild:!0,...d,orientation:l.orientation,dir:l.dir,loop:s,children:(0,r.jsx)(o.Primitive.div,{role:"tablist","aria-orientation":l.orientation,...i,ref:t})})});j.displayName=v;var y="TabsTrigger",N=a.forwardRef((e,t)=>{let{__scopeTabs:a,value:i,disabled:l=!1,...d}=e,c=b(y,a),u=h(a),m=k(c.baseId,i),p=S(c.baseId,i),x=i===c.value;return(0,r.jsx)(n.Item,{asChild:!0,...u,focusable:!l,active:x,children:(0,r.jsx)(o.Primitive.button,{type:"button",role:"tab","aria-selected":x,"aria-controls":p,"data-state":x?"active":"inactive","data-disabled":l?"":void 0,disabled:l,id:m,...d,ref:t,onMouseDown:(0,s.composeEventHandlers)(e.onMouseDown,e=>{l||0!==e.button||!1!==e.ctrlKey?e.preventDefault():c.onValueChange(i)}),onKeyDown:(0,s.composeEventHandlers)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&c.onValueChange(i)}),onFocus:(0,s.composeEventHandlers)(e.onFocus,()=>{let e="manual"!==c.activationMode;x||l||!e||c.onValueChange(i)})})})});N.displayName=y;var w="TabsContent",C=a.forwardRef((e,t)=>{let{__scopeTabs:s,value:i,forceMount:n,children:d,...c}=e,u=b(w,s),m=k(u.baseId,i),p=S(u.baseId,i),x=i===u.value,h=a.useRef(x);return a.useEffect(()=>{let e=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,r.jsx)(l.Presence,{present:n||x,children:({present:a})=>(0,r.jsx)(o.Primitive.div,{"data-state":x?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":m,hidden:!a,id:p,tabIndex:0,...c,ref:t,style:{...e.style,animationDuration:h.current?"0s":void 0},children:a&&d})})});function k(e,t){return`${e}-trigger-${t}`}function S(e,t){return`${e}-content-${t}`}C.displayName=w;var _=e.i(47163);function $({className:e,...t}){return(0,r.jsx)(g,{"data-slot":"tabs",className:(0,_.cn)("flex flex-col gap-2",e),...t})}function A({className:e,...t}){return(0,r.jsx)(j,{"data-slot":"tabs-list",className:(0,_.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",e),...t})}function T({className:e,...t}){return(0,r.jsx)(N,{"data-slot":"tabs-trigger",className:(0,_.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t})}function P({className:e,...t}){return(0,r.jsx)(C,{"data-slot":"tabs-content",className:(0,_.cn)("flex-1 outline-none",e),...t})}e.s(["Tabs",()=>$,"TabsContent",()=>P,"TabsList",()=>A,"TabsTrigger",()=>T],27341);var I=e.i(47167),E=e.i(24632),M=e.i(9156);function B(){return"undefined"!=typeof window&&void 0!==window.document}M.parse,M.serialize;let O={path:"/",sameSite:"lax",httpOnly:!1,maxAge:3456e4},q=/^(.*)[.](0|[1-9][0-9]*)$/;function z(e,t){if(e===t)return!0;let r=e.match(q);return!!r&&r[1]===t}function R(e,t,r){let a=r??3180,s=encodeURIComponent(t);if(s.length<=a)return[{name:e,value:t}];let i=[];for(;s.length>0;){let e=s.slice(0,a),t=e.lastIndexOf("%");t>a-3&&(e=e.slice(0,t));let r="";for(;e.length>0;)try{r=decodeURIComponent(e);break}catch(t){if(t instanceof URIError&&"%"===e.at(-3)&&e.length>3)e=e.slice(0,e.length-3);else throw t}i.push(r),s=s.slice(e.length)}return i.map((t,r)=>({name:`${e}.${r}`,value:t}))}async function U(e,t){let r=await t(e);if(r)return r;let a=[];for(let r=0;;r++){let s=`${e}.${r}`,i=await t(s);if(!i)break;a.push(i)}return a.length>0?a.join(""):null}let D="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),L=" 	\n\r=".split(""),F=(()=>{let e=Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<L.length;t+=1)e[L[t].charCodeAt(0)]=-2;for(let t=0;t<D.length;t+=1)e[D[t].charCodeAt(0)]=t;return e})();function H(e){let t=[],r=0,a=0;if(function(e,t){for(let r=0;r<e.length;r+=1){let a=e.charCodeAt(r);if(a>55295&&a<=56319){let t=(a-55296)*1024&65535;a=(e.charCodeAt(r+1)-56320&65535|t)+65536,r+=1}!function(e,t){if(e<=127)return t(e);if(e<=2047){t(192|e>>6),t(128|63&e);return}if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|63&e);return}if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|63&e);return}throw Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}(a,t)}}(e,e=>{for(r=r<<8|e,a+=8;a>=6;){let e=r>>a-6&63;t.push(D[e]),a-=6}}),a>0)for(r<<=6-a,a=6;a>=6;){let e=r>>a-6&63;t.push(D[e]),a-=6}return t.join("")}function K(e){let t=[],r=e=>{t.push(String.fromCodePoint(e))},a={utf8seq:0,codepoint:0},s=0,i=0;for(let t=0;t<e.length;t+=1){let n=F[e.charCodeAt(t)];if(n>-1)for(s=s<<6|n,i+=6;i>=8;)(function(e,t,r){if(0===t.utf8seq){if(e<=127)return r(e);for(let r=1;r<6;r+=1)if((e>>7-r&1)==0){t.utf8seq=r;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else if(4===t.utf8seq)t.codepoint=7&e;else throw Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&r(t.codepoint)}})(s>>i-8&255,a,r),i-=8;else if(-2===n)continue;else throw Error(`Invalid Base64-URL character "${e.at(t)}" at position ${t}`)}return t.join("")}let V="base64-";async function J({getAll:e,setAll:t,setItems:r,removedItems:a},s){let i=s.cookieEncoding,n=s.cookieOptions??null,l=await e([...r?Object.keys(r):[],...a?Object.keys(a):[]]),o=l?.map(({name:e})=>e)||[],d=Object.keys(a).flatMap(e=>o.filter(t=>z(t,e))),c=Object.keys(r).flatMap(e=>{let t=new Set(o.filter(t=>z(t,e))),a=r[e];"base64url"===i&&(a=V+H(a));let s=R(e,a);return s.forEach(e=>{t.delete(e.name)}),d.push(...t),s}),u={...O,...n,maxAge:0},m={...O,...n,maxAge:O.maxAge};delete u.name,delete m.name,await t([...d.map(e=>({name:e,value:"",options:u})),...c.map(({name:e,value:t})=>({name:e,value:t,options:m}))])}function W(e,r,a){let s=a?.isSingleton===!0||(!a||!("isSingleton"in a))&&B();if(s&&t)return t;if(!e||!r)throw Error(`@supabase/ssr: Your project's URL and API key are required to create a Supabase client!

Check your Supabase project's API settings to find these values

https://supabase.com/dashboard/project/_/settings/api`);let{storage:i}=function(e,t){let r,a,s=e.cookies??null,i=e.cookieEncoding,n={},l={};if(s)if("get"in s){let e=async e=>{let t=e.flatMap(e=>[e,...Array.from({length:5}).map((t,r)=>`${e}.${r}`)]),r=[];for(let e=0;e<t.length;e+=1){let a=await s.get(t[e]);(a||"string"==typeof a)&&r.push({name:t[e],value:a})}return r};if(r=async t=>await e(t),"set"in s&&"remove"in s)a=async e=>{for(let t=0;t<e.length;t+=1){let{name:r,value:a,options:i}=e[t];a?await s.set(r,a,i):await s.remove(r,i)}};else if(t)a=async()=>{console.warn("@supabase/ssr: createServerClient was configured without set and remove cookie methods, but the client needs to set cookies. This can lead to issues such as random logouts, early session termination or increased token refresh requests. If in NextJS, check your middleware.ts file, route handlers and server actions for correctness. Consider switching to the getAll and setAll cookie methods instead of get, set and remove which are deprecated and can be difficult to use correctly.")};else throw Error("@supabase/ssr: createBrowserClient requires configuring a getAll and setAll cookie method (deprecated: alternatively both get, set and remove can be used)")}else if("getAll"in s)if(r=async()=>await s.getAll(),"setAll"in s)a=s.setAll;else if(t)a=async()=>{console.warn("@supabase/ssr: createServerClient was configured without the setAll cookie method, but the client needs to set cookies. This can lead to issues such as random logouts, early session termination or increased token refresh requests. If in NextJS, check your middleware.ts file, route handlers and server actions for correctness.")};else throw Error("@supabase/ssr: createBrowserClient requires configuring both getAll and setAll cookie methods (deprecated: alternatively both get, set and remove can be used)");else throw Error(`@supabase/ssr: ${t?"createServerClient":"createBrowserClient"} requires configuring getAll and setAll cookie methods (deprecated: alternatively use get, set and remove).${B()?" As this is called in a browser runtime, consider removing the cookies option object to use the document.cookie API automatically.":""}`);else if(!t&&B())r=()=>{let e;return Object.keys(e=(0,M.parse)(document.cookie)).map(t=>({name:t,value:e[t]??""}))},a=e=>{e.forEach(({name:e,value:t,options:r})=>{document.cookie=(0,M.serialize)(e,t,r)})};else if(t)throw Error("@supabase/ssr: createServerClient must be initialized with cookie options that specify getAll and setAll functions (deprecated, not recommended: alternatively use get, set and remove)");else r=()=>[],a=()=>{throw Error("@supabase/ssr: createBrowserClient in non-browser runtimes (including Next.js pre-rendering mode) was not initialized cookie options that specify getAll and setAll functions (deprecated: alternatively use get, set and remove), but they were needed")};return t?{getAll:r,setAll:a,setItems:n,removedItems:l,storage:{isServer:!0,getItem:async e=>{if("string"==typeof n[e])return n[e];if(l[e])return null;let t=await r([e]),a=await U(e,async e=>{let r=t?.find(({name:t})=>t===e)||null;return r?r.value:null});if(!a)return null;let s=a;return"string"==typeof a&&a.startsWith(V)&&(s=K(a.substring(V.length))),s},setItem:async(t,s)=>{t.endsWith("-code-verifier")&&await J({getAll:r,setAll:a,setItems:{[t]:s},removedItems:{}},{cookieOptions:e?.cookieOptions??null,cookieEncoding:i}),n[t]=s,delete l[t]},removeItem:async e=>{delete n[e],l[e]=!0}}}:{getAll:r,setAll:a,setItems:n,removedItems:l,storage:{isServer:!1,getItem:async e=>{let t=await r([e]),a=await U(e,async e=>{let r=t?.find(({name:t})=>t===e)||null;return r?r.value:null});if(!a)return null;let s=a;return a.startsWith(V)&&(s=K(a.substring(V.length))),s},setItem:async(t,s)=>{let n=await r([t]),l=new Set((n?.map(({name:e})=>e)||[]).filter(e=>z(e,t))),o=s;"base64url"===i&&(o=V+H(s));let d=R(t,o);d.forEach(({name:e})=>{l.delete(e)});let c={...O,...e?.cookieOptions,maxAge:0},u={...O,...e?.cookieOptions,maxAge:O.maxAge};delete c.name,delete u.name;let m=[...[...l].map(e=>({name:e,value:"",options:c})),...d.map(({name:e,value:t})=>({name:e,value:t,options:u}))];m.length>0&&await a(m)},removeItem:async t=>{let s=await r([t]),i=(s?.map(({name:e})=>e)||[]).filter(e=>z(e,t)),n={...O,...e?.cookieOptions,maxAge:0};delete n.name,i.length>0&&await a(i.map(e=>({name:e,value:"",options:n})))}}}}({...a,cookieEncoding:a?.cookieEncoding??"base64url"},!1),n=(0,E.createClient)(e,r,{...a,global:{...a?.global,headers:{...a?.global?.headers,"X-Client-Info":"supabase-ssr/0.7.0 createBrowserClient"}},auth:{...a?.auth,...a?.cookieOptions?.name?{storageKey:a.cookieOptions.name}:null,flowType:"pkce",autoRefreshToken:B(),detectSessionInUrl:B(),persistSession:!0,storage:i}});return s&&(t=n),n}e.s(["createBrowserClient",()=>W],72390),e.i(52683),e.s([],29225);let X=new Map;async function Y(e,t){if(X.has(e))return console.log("[v0] Profile from session cache:",e),X.get(e);let r=W(I.default.env.NEXT_PUBLIC_SUPABASE_URL,I.default.env.NEXT_PUBLIC_SUPABASE_ANON_KEY);try{let{data:t,error:a}=await r.from("profiles").select("discord_username, discord_avatar").eq("discord_id",e).single();if(!a&&t?.discord_username){console.log("[v0] Profile from Supabase:",e);let r={username:t.discord_username,avatar:t.discord_avatar||`https://cdn.discordapp.com/embed/avatars/${Number.parseInt(e)%5}.png`};return X.set(e,r),r}}catch(e){console.error("[v0] Error checking Supabase profile:",e)}console.log("[v0] Fetching profile from Discord API:",e);try{let a=await fetch(`/api/guilds/${t}/members/${e}`);if(!a.ok)throw Error("Failed to fetch user");let s=await a.json(),i=s.user?.username||s.nick||"Utilisateur inconnu",n=s.user?.avatar?`https://cdn.discordapp.com/avatars/${e}/${s.user.avatar}.png`:`https://cdn.discordapp.com/embed/avatars/${Number.parseInt(e)%5}.png`,l={username:i,avatar:n};return await r.from("profiles").upsert({discord_id:e,discord_username:i,discord_avatar:n},{onConflict:"discord_id"}),X.set(e,l),l}catch(t){return console.error("[v0] Error fetching Discord user:",e,t),{username:"Utilisateur inconnu",avatar:"https://cdn.discordapp.com/embed/avatars/0.png"}}}async function G(e,t){let r=new Map,a=[];for(let t of e)X.has(t)?r.set(t,X.get(t)):a.push(t);if(0===a.length)return console.log("[v0] All profiles from session cache"),r;let s=W(I.default.env.NEXT_PUBLIC_SUPABASE_URL,I.default.env.NEXT_PUBLIC_SUPABASE_ANON_KEY);try{let{data:e,error:i}=await s.from("profiles").select("discord_id, discord_username, discord_avatar").in("discord_id",a),n=[];if(!i&&e){for(let t of(console.log("[v0] Found profiles in Supabase:",e.length),e))if(t.discord_username){let e={username:t.discord_username,avatar:t.discord_avatar||`https://cdn.discordapp.com/embed/avatars/${Number.parseInt(t.discord_id)%5}.png`};r.set(t.discord_id,e),X.set(t.discord_id,e)}for(let e of a)r.has(e)||n.push(e)}else n.push(...a);if(n.length>0){console.log("[v0] Fetching from Discord API:",n.length,"profiles");let e=n.map(e=>Y(e,t)),a=await Promise.all(e);n.forEach((e,t)=>{r.set(e,a[t])})}}catch(e){console.error("[v0] Error in batch profile fetch:",e)}return r}e.s(["getDiscordProfiles",()=>G],30536)},87336,52754,67240,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(30030),s=e.i(48425),i="Progress",[n,l]=(0,a.createContextScope)(i),[o,d]=n(i),c=r.forwardRef((e,r)=>{var a,i;let{__scopeProgress:n,value:l=null,max:d,getValueLabel:c=p,...u}=e;(d||0===d)&&!f(d)&&console.error((a=`${d}`,`Invalid prop \`max\` of value \`${a}\` supplied to \`Progress\`. Only numbers greater than 0 are valid max values. Defaulting to \`100\`.`));let m=f(d)?d:100;null===l||b(l,m)||console.error((i=`${l}`,`Invalid prop \`value\` of value \`${i}\` supplied to \`Progress\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or 100 if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`));let g=b(l,m)?l:null,v=h(g)?c(g,m):void 0;return(0,t.jsx)(o,{scope:n,value:g,max:m,children:(0,t.jsx)(s.Primitive.div,{"aria-valuemax":m,"aria-valuemin":0,"aria-valuenow":h(g)?g:void 0,"aria-valuetext":v,role:"progressbar","data-state":x(g,m),"data-value":g??void 0,"data-max":m,...u,ref:r})})});c.displayName=i;var u="ProgressIndicator",m=r.forwardRef((e,r)=>{let{__scopeProgress:a,...i}=e,n=d(u,a);return(0,t.jsx)(s.Primitive.div,{"data-state":x(n.value,n.max),"data-value":n.value??void 0,"data-max":n.max,...i,ref:r})});function p(e,t){return`${Math.round(e/t*100)}%`}function x(e,t){return null==e?"indeterminate":e===t?"complete":"loading"}function h(e){return"number"==typeof e}function f(e){return h(e)&&!isNaN(e)&&e>0}function b(e,t){return h(e)&&!isNaN(e)&&e<=t&&e>=0}m.displayName=u;var g=e.i(47163);function v({className:e,value:r,...a}){return(0,t.jsx)(c,{"data-slot":"progress",className:(0,g.cn)("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",e),...a,children:(0,t.jsx)(m,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(r||0)}%)`}})})}e.s(["Progress",()=>v],87336);var j=e.i(75254);let y=(0,j.default)("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);e.s(["Wallet",()=>y],52754);let N=(0,j.default)("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);e.s(["RotateCcw",()=>N],67240)},32986,e=>{"use strict";var t=e.i(47167),r=e.i(43476),a=e.i(71645),s=e.i(70065),i=e.i(27341),n=e.i(94179),l=e.i(67881),o=e.i(87336),d=e.i(23750),c=e.i(66551),u=e.i(31278),m=e.i(61911),p=e.i(3116),x=e.i(52754),h=e.i(67240),f=e.i(24632),b=e.i(30536);function g(e){return e.toLocaleString("fr-FR")}function v(e){let t=Math.max(1,Math.floor((Date.now()-new Date(e).getTime())/1e3));if(t<60)return`${t}s`;let r=Math.floor(t/60);if(r<60)return`${r}m`;let a=Math.floor(r/60);return a<24?`${a}h`:`${Math.floor(a/24)}j`}let j=[0,32,15,19,4,21,2,25,17,34,6,27,13,36,11,30,8,23,10,5,24,16,33,1,20,14,31,9,22,18,29,7,28,12,35,3,26],y=new Set([1,3,5,7,9,12,14,16,18,19,21,23,25,27,30,32,34,36]);function N(e){return"‚ô•"===e||"‚ô¶"===e?"text-red-500":"text-foreground"}function w({card:e,hidden:t=!1,delay:s=0}){let[i,n]=(0,a.useState)(0===s);return((0,a.useEffect)(()=>{if(s>0){let e=setTimeout(()=>n(!0),s);return()=>clearTimeout(e)}},[s]),i)?t||"?"===e.rank?(0,r.jsx)("div",{className:"w-20 h-28 rounded-xl bg-gradient-to-br from-primary to-primary/80 border-2 border-primary/30 flex items-center justify-center shadow-lg shadow-primary/10 transition-all duration-300",children:(0,r.jsx)("span",{className:"text-2xl font-bold text-primary-foreground/50",children:"?"})}):(0,r.jsxs)("div",{className:"w-20 h-28 rounded-xl bg-card border-2 border-border flex flex-col items-center justify-center shadow-lg transition-all duration-300 hover:scale-105 hover:shadow-xl",children:[(0,r.jsx)("span",{className:`text-xl font-bold ${N(e.suit)}`,children:e.rank}),(0,r.jsx)("span",{className:`text-2xl ${N(e.suit)}`,children:e.suit})]}):(0,r.jsx)("div",{className:"w-20 h-28 rounded-xl bg-gradient-to-br from-primary/20 to-primary/5 border-2 border-primary/20 animate-pulse"})}let C=[{label:"Couleurs",bets:[{value:"rouge",label:"üî¥ Rouge",mult:"√ó2"},{value:"noir",label:"‚ö´ Noir",mult:"√ó2"}]},{label:"Parit√©",bets:[{value:"pair",label:"Pair",mult:"√ó2"},{value:"impair",label:"Impair",mult:"√ó2"}]},{label:"Moiti√©s",bets:[{value:"1-18",label:"1-18",mult:"√ó2"},{value:"19-36",label:"19-36",mult:"√ó2"}]},{label:"Douzaines",bets:[{value:"doz1",label:"1√®re (1-12)",mult:"√ó3"},{value:"doz2",label:"2√®me (13-24)",mult:"√ó3"},{value:"doz3",label:"3√®me (25-36)",mult:"√ó3"}]},{label:"Colonnes",bets:[{value:"col1",label:"Col. 1",mult:"√ó3"},{value:"col2",label:"Col. 2",mult:"√ó3"},{value:"col3",label:"Col. 3",mult:"√ó3"}]}];function k(){var e;let[N,k]=(0,a.useState)(!0),[S,_]=(0,a.useState)(null),[$,A]=(0,a.useState)(null),[T,P]=(0,a.useState)(0),[I,E]=(0,a.useState)("rouge"),[M,B]=(0,a.useState)(100),[O,q]=(0,a.useState)(!1),[z,R]=(0,a.useState)(null),[U,D]=(0,a.useState)(0),[L,F]=(0,a.useState)(""),[H,K]=(0,a.useState)(null),[V,J]=(0,a.useState)(100),[W,X]=(0,a.useState)(!1),[Y,G]=(0,a.useState)([]),[Z,Q]=(0,a.useState)([]),[ee,et]=(0,a.useState)(new Map),[er,ea]=(0,a.useState)(100),[es,ei]=(0,a.useState)(!1),[en,el]=(0,a.useState)(null),[eo,ed]=(0,a.useState)(["üçí","üçã","üçä"]),ec=(0,f.createClient)(t.default.env.NEXT_PUBLIC_SUPABASE_URL,t.default.env.NEXT_PUBLIC_SUPABASE_ANON_KEY),eu=(0,a.useCallback)(async e=>{let t=await fetch(`/api/casino/balance?guildId=${e}`);if(t.ok){let e=await t.json();A(e),P(e.balance)}},[]);async function em(){if(!S||O)return;let e=""!==L?L:I;q(!0),R(null);let t=await fetch("/api/casino/roulette",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({guildId:S,bet:e,mise:M})}),r=await t.json();if(!t.ok){q(!1),R({error:r.error});return}D(U+360*(5+Math.floor(3*Math.random()))+(360-360/37*j.indexOf(r.number))),setTimeout(()=>{R(r),P(r.newBalance),q(!1)},3500)}async function ep(e){if(!S||W)return;X(!0);let t=await fetch("/api/casino/blackjack",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({guildId:S,action:e,mise:"start"===e?V:void 0})}),r=await t.json();(X(!1),t.ok)?(K(r),void 0!==r.newBalance&&P(r.newBalance)):K(e=>({...e,error:r.error}))}async function ex(){if(!S||es)return;ei(!0),el(null);let e=await fetch("/api/casino/slots",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({guildId:S,mise:er})}),t=await e.json();if(!e.ok){ei(!1),el({error:t.error});return}let r=["üçí","üçã","üçä","üçá","‚≠ê","üíé","7Ô∏è‚É£"],a=0,s=setInterval(()=>{ed([++a<8?r[Math.floor(Math.random()*r.length)]:t.reels[0].emoji,a<14?r[Math.floor(Math.random()*r.length)]:t.reels[1].emoji,a<20?r[Math.floor(Math.random()*r.length)]:t.reels[2].emoji]),a>=20&&(clearInterval(s),el(t),P(t.newBalance),ei(!1))},100)}if((0,a.useEffect)(()=>{let e=localStorage.getItem("selected_guild");(_(e),e)?async function(){await eu(e);try{let{data:t}=await ec.from("bets").select(`
            id, guild_id, creator_id, title, status, type, resolved_option_id, created_at,
            bet_options:bet_options!bet_options_bet_id_fkey(id, name),
            bet_participants(id, option_id, user_id, amount)
          `).eq("guild_id",e).order("created_at",{ascending:!1}).limit(30);if(t){let r=new Set,a=t.map(e=>{let t=0,a={};e.bet_options?.forEach(e=>{a[e.id]=0}),e.bet_participants?.forEach(e=>{t+=Number(e.amount),a[e.option_id]=(a[e.option_id]||0)+Number(e.amount)});let s=2e3/(e.bet_options?.length||1),i=t+2e3,n=(e.bet_options||[]).map(e=>{let t=a[e.id]||0,r=i/(t+s);return r<1.01&&(r=1.01),{...e,totalMise:t,odds:r.toFixed(2)}});return r.add(e.creator_id),e.bet_participants?.forEach(e=>r.add(e.user_id)),{id:e.id,title:e.title,status:e.status,type:e.type,created_at:e.created_at,creator_id:e.creator_id,resolved_option_id:e.resolved_option_id,options:n,totalPool:t,participantCount:e.bet_participants?.length||0}});if(G(a.filter(e=>"open"===e.status||"closed"===e.status)),Q(a.filter(e=>"resolved"===e.status||"cancelled"===e.status).slice(0,10)),r.size>0)try{et(await (0,b.getDiscordProfiles)(Array.from(r),e))}catch{}}}catch{}k(!1)}():k(!1)},[eu]),N)return(0,r.jsx)("div",{className:"flex h-96 items-center justify-center",children:(0,r.jsx)(u.Loader2,{className:"h-8 w-8 animate-spin text-primary"})});if(!S)return(0,r.jsx)("div",{className:"flex h-96 items-center justify-center text-muted-foreground",children:"S√©lectionne un serveur"});let eh=H?.result&&""!==H.result;return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"Casino"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Roulette, Blackjack et paris"})]}),(0,r.jsx)(s.Card,{className:"border-border bg-gradient-to-r from-amber-500/10 to-yellow-500/10 sm:w-auto",children:(0,r.jsxs)(s.CardContent,{className:"flex items-center gap-3 p-4",children:[(0,r.jsx)(x.Wallet,{className:"h-5 w-5 text-amber-500"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Ton solde"}),(0,r.jsxs)("p",{className:"text-xl font-bold text-amber-500",children:[g(T)," pq"]})]}),(0,r.jsx)(l.Button,{variant:"ghost",size:"icon",className:"ml-2 h-8 w-8",onClick:()=>S&&eu(S),children:(0,r.jsx)(h.RotateCcw,{className:"h-4 w-4"})})]})})]}),(0,r.jsxs)(i.Tabs,{defaultValue:"roulette",className:"w-full",children:[(0,r.jsxs)(i.TabsList,{className:"grid w-full grid-cols-4",children:[(0,r.jsxs)(i.TabsTrigger,{value:"roulette",className:"gap-2",children:[(0,r.jsx)("span",{className:"text-lg",children:"üé∞"}),(0,r.jsx)("span",{className:"hidden sm:inline",children:"Roulette"})]}),(0,r.jsxs)(i.TabsTrigger,{value:"blackjack",className:"gap-2",children:[(0,r.jsx)("span",{className:"text-lg",children:"üÉè"}),(0,r.jsx)("span",{className:"hidden sm:inline",children:"Blackjack"})]}),(0,r.jsxs)(i.TabsTrigger,{value:"slots",className:"gap-2",children:[(0,r.jsx)("span",{className:"text-lg",children:"üçí"}),(0,r.jsx)("span",{className:"hidden sm:inline",children:"Machine √† sous"})]}),(0,r.jsxs)(i.TabsTrigger,{value:"bets",className:"gap-2",children:[(0,r.jsx)(c.Dices,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"hidden sm:inline",children:"Paris"})]})]}),(0,r.jsxs)(i.TabsContent,{value:"roulette",className:"mt-6 space-y-6",children:[(0,r.jsxs)("div",{className:"grid gap-6 lg:grid-cols-2",children:[(0,r.jsxs)(s.Card,{className:"border-border bg-gradient-to-br from-card to-emerald-500/5",children:[(0,r.jsx)(s.CardHeader,{children:(0,r.jsx)(s.CardTitle,{className:"text-center",children:"üé∞ Roulette Europ√©enne"})}),(0,r.jsxs)(s.CardContent,{className:"flex flex-col items-center space-y-6",children:[(0,r.jsxs)("div",{className:"relative w-72 h-72",children:[(0,r.jsx)("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1 z-10 w-0 h-0 border-l-[10px] border-r-[10px] border-t-[20px] border-l-transparent border-r-transparent border-t-amber-400 drop-shadow-lg"}),(0,r.jsx)("div",{className:"w-72 h-72 rounded-full border-4 border-amber-500/50 overflow-hidden shadow-2xl shadow-amber-500/10",style:{transform:`rotate(${U}deg)`,transition:O?"transform 3.5s cubic-bezier(0.17, 0.67, 0.12, 0.99)":"none"},children:(0,r.jsxs)("svg",{viewBox:"0 0 200 200",className:"w-full h-full",children:[j.map((e,t)=>{let a=360*t/37,s=(t+1)*360/37,i=(a+s)/2,n=Math.PI/180*(a-90),l=Math.PI/180*(s-90),o=Math.PI/180*(i-90),d=100+100*Math.cos(n),c=100+100*Math.sin(n),u=100+100*Math.cos(l),m=100+100*Math.sin(l),p=100+40*Math.cos(l),x=100+40*Math.sin(l),h=100+40*Math.cos(n),f=100+40*Math.sin(n),b=100+73*Math.cos(o),g=100+73*Math.sin(o),v=0===e?"#059669":y.has(e)?"#dc2626":"#18181b";return(0,r.jsxs)("g",{children:[(0,r.jsx)("path",{d:`M ${d} ${c} A 100 100 0 0 1 ${u} ${m} L ${p} ${x} A 40 40 0 0 0 ${h} ${f} Z`,fill:v,stroke:"#333",strokeWidth:"0.5"}),(0,r.jsx)("text",{x:b,y:g,textAnchor:"middle",dominantBaseline:"central",fill:"white",fontSize:"6",fontWeight:"bold",transform:`rotate(${i}, ${b}, ${g})`,children:e})]},e)}),(0,r.jsx)("circle",{cx:"100",cy:"100",r:"38",fill:"#1a1a2e",stroke:"#333",strokeWidth:"1"}),(0,r.jsx)("text",{x:"100",y:"100",textAnchor:"middle",dominantBaseline:"central",fill:"#f59e0b",fontSize:"10",fontWeight:"bold",children:z?z.number:"üé∞"})]})})]}),z&&!z.error&&(0,r.jsxs)("div",{className:`rounded-2xl p-4 text-center w-full ${z.won?"bg-emerald-500/10 border border-emerald-500/30":"bg-red-500/10 border border-red-500/30"}`,children:[(0,r.jsxs)("div",{className:"flex items-center justify-center gap-3 mb-2",children:[(0,r.jsx)("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold text-white ${0===(e=z.number)?"bg-emerald-600":y.has(e)?"bg-red-600":"bg-zinc-900"}`,children:z.number}),(0,r.jsx)("span",{className:"text-lg font-bold",children:"red"===z.color?"üî¥ Rouge":"black"===z.color?"‚ö´ Noir":"üü¢ Vert"})]}),(0,r.jsx)("p",{className:`text-xl font-bold ${z.won?"text-emerald-400":"text-red-400"}`,children:z.won?`+${g(z.winnings)} pq üéâ`:`-${g(M)} pq`})]}),z?.error&&(0,r.jsxs)("div",{className:"rounded-2xl bg-red-500/10 border border-red-500/30 p-4 text-center text-red-400 w-full",children:["‚ùå ",z.error]})]})]}),(0,r.jsxs)(s.Card,{className:"border-border bg-card",children:[(0,r.jsxs)(s.CardHeader,{children:[(0,r.jsx)(s.CardTitle,{children:"Placer ta mise"}),(0,r.jsx)(s.CardDescription,{children:"Choisis ton pari et le montant"})]}),(0,r.jsxs)(s.CardContent,{className:"space-y-5",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium text-foreground",children:"Montant"}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(d.Input,{type:"number",min:1,max:5e4,value:M,onChange:e=>B(Math.max(1,parseInt(e.target.value)||0)),className:"flex-1"}),(0,r.jsx)("div",{className:"flex gap-1",children:[100,500,1e3,5e3].map(e=>(0,r.jsx)(l.Button,{variant:"outline",size:"sm",className:"text-xs",onClick:()=>B(e),children:e>=1e3?`${e/1e3}k`:e},e))})]})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[C.map(e=>(0,r.jsxs)("div",{className:"space-y-1.5",children:[(0,r.jsx)("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:e.label}),(0,r.jsx)("div",{className:"flex flex-wrap gap-1.5",children:e.bets.map(e=>(0,r.jsxs)(l.Button,{variant:I===e.value&&""===L?"default":"outline",size:"sm",className:"text-xs",onClick:()=>{E(e.value),F("")},children:[e.label," ",(0,r.jsx)("span",{className:"ml-1 opacity-60",children:e.mult})]},e.value))})]},e.label)),(0,r.jsxs)("div",{className:"space-y-1.5",children:[(0,r.jsx)("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Num√©ro direct (√ó36)"}),(0,r.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,r.jsx)(d.Input,{type:"number",min:0,max:36,placeholder:"0-36",value:L,onChange:e=>{F(e.target.value),""!==e.target.value&&E("")},className:"w-24"}),""!==L&&(0,r.jsxs)(n.Badge,{className:"bg-primary/10 text-primary",children:["Num√©ro ",L]})]})]})]}),(0,r.jsx)(l.Button,{className:"w-full h-14 text-lg font-bold gap-2 bg-gradient-to-r from-emerald-600 to-emerald-500 hover:from-emerald-500 hover:to-emerald-400 shadow-lg shadow-emerald-500/20",disabled:O||M<=0,onClick:em,children:O?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u.Loader2,{className:"h-5 w-5 animate-spin"})," La roue tourne..."]}):(0,r.jsxs)(r.Fragment,{children:["üé∞ Tourner la roue ‚Äî ",g(M)," pq"]})})]})]})]}),(0,r.jsxs)(s.Card,{className:"border-border bg-card",children:[(0,r.jsx)(s.CardHeader,{children:(0,r.jsx)(s.CardTitle,{children:"Table de la Roulette"})}),(0,r.jsx)(s.CardContent,{children:(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("div",{className:"grid grid-cols-13 gap-0.5 min-w-[520px]",style:{gridTemplateColumns:"repeat(13, 1fr)"},children:[(0,r.jsx)("button",{onClick:()=>{F("0"),E("")},className:`row-span-3 rounded-lg flex items-center justify-center text-sm font-bold text-white transition-all hover:scale-105 ${"0"===L?"ring-2 ring-amber-400 scale-105":""} bg-emerald-600 h-full min-h-[80px]`,children:"0"}),[[3,6,9,12,15,18,21,24,27,30,33,36],[2,5,8,11,14,17,20,23,26,29,32,35],[1,4,7,10,13,16,19,22,25,28,31,34]].map((e,t)=>e.map(e=>(0,r.jsx)("button",{onClick:()=>{F(String(e)),E("")},className:`h-[28px] rounded flex items-center justify-center text-xs font-bold text-white transition-all hover:scale-110 ${L===String(e)?"ring-2 ring-amber-400 scale-110":""} ${y.has(e)?"bg-red-600 hover:bg-red-500":"bg-zinc-800 hover:bg-zinc-700"}`,children:e},e)))]})})})]})]}),(0,r.jsx)(i.TabsContent,{value:"blackjack",className:"mt-6 space-y-6",children:(0,r.jsxs)(s.Card,{className:"border-border bg-gradient-to-br from-card via-card to-emerald-500/5",children:[(0,r.jsxs)(s.CardHeader,{className:"text-center",children:[(0,r.jsx)(s.CardTitle,{className:"text-2xl",children:"üÉè Blackjack"}),(0,r.jsx)(s.CardDescription,{children:"Bat le croupier sans d√©passer 21"})]}),(0,r.jsx)(s.CardContent,{className:"space-y-8",children:H?(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)("div",{className:"text-center space-y-3",children:[(0,r.jsxs)("p",{className:"text-sm font-medium text-muted-foreground uppercase tracking-wider",children:["Croupier ",eh?`‚Äî ${H.dealerValue}`:`‚Äî ${H.dealerValue}+?`]}),(0,r.jsx)("div",{className:"flex justify-center gap-3 flex-wrap",children:H.dealer.map((e,t)=>(0,r.jsx)(w,{card:e,delay:eh&&1===t?300:0},t))})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("div",{className:"flex-1 h-px bg-border"}),eh&&(0,r.jsxs)("div",{className:`px-6 py-2 rounded-full font-bold text-sm ${"win"===H.result||"blackjack"===H.result||"dealer_bust"===H.result?"bg-emerald-500/10 text-emerald-400 border border-emerald-500/30":"push"===H.result?"bg-amber-500/10 text-amber-400 border border-amber-500/30":"bg-red-500/10 text-red-400 border border-red-500/30"}`,children:["blackjack"===H.result&&"üé∞ BLACKJACK !","win"===H.result&&"‚úÖ Tu gagnes !","dealer_bust"===H.result&&"üí• Croupier bust !","push"===H.result&&"ü§ù √âgalit√©","bust"===H.result&&"üíÄ Bust !","lose"===H.result&&"‚ùå Perdu",void 0!==H.payout&&H.payout>0&&` +${g(H.payout)} pq`]}),(0,r.jsx)("div",{className:"flex-1 h-px bg-border"})]}),(0,r.jsxs)("div",{className:"text-center space-y-3",children:[(0,r.jsx)("div",{className:"flex justify-center gap-3 flex-wrap",children:H.player.map((e,t)=>(0,r.jsx)(w,{card:e,delay:200*(t>=2)},t))}),(0,r.jsxs)("p",{className:"text-sm font-medium text-muted-foreground uppercase tracking-wider",children:["Toi ‚Äî ",(0,r.jsx)("span",{className:`font-bold ${H.playerValue>21?"text-red-400":21===H.playerValue?"text-emerald-400":"text-foreground"}`,children:H.playerValue})]})]}),(0,r.jsx)("div",{className:"flex justify-center",children:(0,r.jsxs)(n.Badge,{className:"bg-amber-500/10 text-amber-400 border-amber-500/20 text-base px-4 py-1",children:["Mise: ",g(H.bet)," pq",H.doubled&&" (doubl√©)"]})}),eh?(0,r.jsx)("div",{className:"flex justify-center",children:(0,r.jsxs)(l.Button,{onClick:()=>K(null),className:"gap-2 h-12 px-8 bg-gradient-to-r from-primary to-primary/80",children:[(0,r.jsx)(h.RotateCcw,{className:"h-4 w-4"})," Nouvelle partie"]})}):(0,r.jsxs)("div",{className:"flex justify-center gap-3 flex-wrap",children:[(0,r.jsxs)(l.Button,{onClick:()=>ep("hit"),disabled:W,className:"bg-blue-600 hover:bg-blue-500 text-white gap-2 h-12 px-8",children:[W?(0,r.jsx)(u.Loader2,{className:"h-4 w-4 animate-spin"}):"üéØ"," Tirer"]}),(0,r.jsx)(l.Button,{onClick:()=>ep("stand"),disabled:W,variant:"outline",className:"gap-2 h-12 px-8",children:"‚úã Rester"}),(0,r.jsx)(l.Button,{onClick:()=>ep("double"),disabled:W||!H.canDouble||H.player.length>2,className:"bg-amber-600 hover:bg-amber-500 text-white gap-2 h-12 px-8",children:"üí∞ Doubler"})]}),H.error&&(0,r.jsxs)("p",{className:"text-center text-red-400",children:["‚ùå ",H.error]})]}):(0,r.jsxs)("div",{className:"flex flex-col items-center space-y-6 py-8",children:[(0,r.jsx)("div",{className:"flex gap-3 opacity-30",children:[{suit:"‚ô†",rank:"A"},{suit:"‚ô•",rank:"K"}].map((e,t)=>(0,r.jsx)(w,{card:e},t))}),(0,r.jsxs)("div",{className:"space-y-3 text-center",children:[(0,r.jsx)("p",{className:"text-muted-foreground",children:"Place ta mise pour commencer"}),(0,r.jsxs)("div",{className:"flex items-center gap-2 justify-center",children:[(0,r.jsx)(d.Input,{type:"number",min:1,max:5e4,value:V,onChange:e=>J(Math.max(1,parseInt(e.target.value)||0)),className:"w-32 text-center"}),(0,r.jsx)("span",{className:"text-muted-foreground",children:"pq"})]}),(0,r.jsx)("div",{className:"flex gap-2 justify-center",children:[100,500,1e3,5e3].map(e=>(0,r.jsx)(l.Button,{variant:"outline",size:"sm",className:"text-xs",onClick:()=>J(e),children:e>=1e3?`${e/1e3}k`:e},e))}),(0,r.jsxs)(l.Button,{className:"h-14 px-10 text-lg font-bold gap-2 bg-gradient-to-r from-blue-600 to-blue-500 hover:from-blue-500 hover:to-blue-400 shadow-lg shadow-blue-500/20",disabled:W||V<=0,onClick:()=>ep("start"),children:[W?(0,r.jsx)(u.Loader2,{className:"h-5 w-5 animate-spin"}):"üÉè"," Jouer ‚Äî ",g(V)," pq"]})]})]})})]})}),(0,r.jsx)(i.TabsContent,{value:"slots",className:"mt-6 space-y-6",children:(0,r.jsxs)(s.Card,{className:"border-border bg-gradient-to-br from-card via-card to-purple-500/5",children:[(0,r.jsxs)(s.CardHeader,{className:"text-center",children:[(0,r.jsx)(s.CardTitle,{className:"text-2xl",children:"üçí Machine √† Sous"}),(0,r.jsx)(s.CardDescription,{children:"Aligne 3 symboles identiques pour gagner !"})]}),(0,r.jsxs)(s.CardContent,{className:"space-y-8",children:[(0,r.jsx)("div",{className:"flex justify-center",children:(0,r.jsx)("div",{className:"rounded-3xl bg-gradient-to-br from-zinc-800 to-zinc-900 border-4 border-amber-500/30 p-8 shadow-2xl shadow-amber-500/10",children:(0,r.jsx)("div",{className:"flex gap-4",children:eo.map((e,t)=>(0,r.jsx)("div",{className:`w-24 h-24 rounded-2xl bg-gradient-to-br from-zinc-700 to-zinc-800 border-2 border-zinc-600 flex items-center justify-center text-5xl transition-all duration-200 ${es?"animate-bounce":""} ${en?.won&&en?.type==="triple"?"ring-4 ring-amber-400 shadow-lg shadow-amber-400/30":""}`,style:es?{animationDelay:`${100*t}ms`}:{},children:e},t))})})}),(0,r.jsxs)("div",{className:"grid grid-cols-4 gap-2 text-center text-sm",children:[[{emoji:"üçí",name:"Cerise",mult:"√ó3"},{emoji:"üçã",name:"Citron",mult:"√ó5"},{emoji:"üçä",name:"Orange",mult:"√ó8"},{emoji:"üçá",name:"Raisin",mult:"√ó12"},{emoji:"‚≠ê",name:"√âtoile",mult:"√ó25"},{emoji:"üíé",name:"Diamant",mult:"√ó100"},{emoji:"7Ô∏è‚É£",name:"JACKPOT",mult:"√ó500"}].map(e=>(0,r.jsxs)("div",{className:"rounded-xl bg-muted/30 p-2",children:[(0,r.jsx)("span",{className:"text-xl",children:e.emoji}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:e.mult})]},e.name)),(0,r.jsxs)("div",{className:"rounded-xl bg-muted/30 p-2",children:[(0,r.jsx)("span",{className:"text-sm",children:"2x"}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"√∑1/4"})]})]}),en&&!en.error&&(0,r.jsxs)("div",{className:`rounded-2xl p-5 text-center ${en.won?"bg-emerald-500/10 border border-emerald-500/30":"bg-red-500/10 border border-red-500/30"} ${en.isJackpot?"ring-2 ring-amber-400 animate-pulse":""}`,children:[en.isJackpot&&(0,r.jsx)("p",{className:"text-3xl font-black text-amber-400 mb-2",children:"üé∞ JACKPOT !!! üé∞"}),(0,r.jsx)("p",{className:`text-xl font-bold ${en.won?"text-emerald-400":"text-red-400"}`,children:en.won?`+${g(en.winnings)} pq (\xd7${en.multiplier}) üéâ`:`-${g(er)} pq`}),"double"===en.type&&(0,r.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"2 symboles identiques !"}),"triple"===en.type&&(0,r.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"3 symboles identiques !"})]}),en?.error&&(0,r.jsxs)("div",{className:"rounded-2xl bg-red-500/10 border border-red-500/30 p-4 text-center text-red-400",children:["‚ùå ",en.error]}),(0,r.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(d.Input,{type:"number",min:1,max:5e4,value:er,onChange:e=>ea(Math.max(1,parseInt(e.target.value)||0)),className:"w-32 text-center"}),(0,r.jsx)("span",{className:"text-muted-foreground",children:"pq"})]}),(0,r.jsx)("div",{className:"flex gap-2",children:[100,500,1e3,5e3].map(e=>(0,r.jsx)(l.Button,{variant:"outline",size:"sm",className:"text-xs",onClick:()=>ea(e),children:e>=1e3?`${e/1e3}k`:e},e))}),(0,r.jsx)(l.Button,{className:"h-14 px-10 text-lg font-bold gap-2 bg-gradient-to-r from-purple-600 to-purple-500 hover:from-purple-500 hover:to-purple-400 shadow-lg shadow-purple-500/20 w-full max-w-sm",disabled:es||er<=0,onClick:ex,children:es?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u.Loader2,{className:"h-5 w-5 animate-spin"})," Spinning..."]}):(0,r.jsxs)(r.Fragment,{children:["üçí Tirer le levier ‚Äî ",g(er)," pq"]})})]})]})]})}),(0,r.jsxs)(i.TabsContent,{value:"bets",className:"mt-6 space-y-6",children:[(0,r.jsxs)(s.Card,{className:"border-border bg-card",children:[(0,r.jsxs)(s.CardHeader,{children:[(0,r.jsxs)(s.CardTitle,{className:"flex items-center gap-2",children:[(0,r.jsx)(c.Dices,{className:"h-5 w-5 text-purple-500"}),"Paris en cours"]}),(0,r.jsx)(s.CardDescription,{children:"Paris ouverts ou en attente ‚Ä¢ Mise via /pari sur Discord"})]}),(0,r.jsx)(s.CardContent,{children:0===Y.length?(0,r.jsx)("p",{className:"py-8 text-center text-muted-foreground",children:"Aucun pari en cours ‚Äî Cr√©e un pari avec /pari sur Discord !"}):(0,r.jsx)("div",{className:"space-y-4",children:Y.map(e=>{var t;return(0,r.jsxs)("div",{className:"rounded-2xl border border-border bg-muted/30 p-5 space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-foreground",children:e.title}),(0,r.jsxs)("p",{className:"text-sm text-muted-foreground mt-0.5",children:["Par ",(t=e.creator_id,ee.get(t)?.username||"Utilisateur")," ¬∑ ",v(e.created_at)]})]}),(0,r.jsx)(n.Badge,{className:"open"===e.status?"bg-emerald-500/10 text-emerald-500 border-emerald-500/20":"bg-amber-500/10 text-amber-500 border-amber-500/20",children:"open"===e.status?"üü¢ Ouvert":"üü° Ferm√©"})]}),(0,r.jsx)("div",{className:"grid gap-2 sm:grid-cols-2",children:e.options.map(t=>{let a=e.totalPool>0?t.totalMise/e.totalPool*100:0;return(0,r.jsxs)("div",{className:"rounded-xl border border-border bg-card p-3 space-y-2",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"font-medium text-foreground",children:t.name}),(0,r.jsxs)(n.Badge,{variant:"outline",className:"text-primary",children:["√ó",t.odds]})]}),(0,r.jsx)(o.Progress,{value:a,className:"h-1.5"}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground",children:[g(t.totalMise)," pq (",a.toFixed(0),"%)"]})]},t.id)})}),(0,r.jsxs)("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[(0,r.jsxs)("span",{className:"flex items-center gap-1",children:[(0,r.jsx)(m.Users,{className:"h-4 w-4"}),e.participantCount]}),(0,r.jsxs)("span",{children:["üí∞ ",g(e.totalPool)," pq"]}),"valorant_next_match"===e.type&&(0,r.jsx)(n.Badge,{variant:"outline",className:"text-red-400 border-red-500/20",children:"üéØ Valorant"})]})]},e.id)})})})]}),(0,r.jsxs)(s.Card,{className:"border-border bg-card",children:[(0,r.jsx)(s.CardHeader,{children:(0,r.jsxs)(s.CardTitle,{className:"flex items-center gap-2",children:[(0,r.jsx)(p.Clock,{className:"h-5 w-5 text-blue-500"}),"Historique"]})}),(0,r.jsx)(s.CardContent,{children:0===Z.length?(0,r.jsx)("p",{className:"py-8 text-center text-muted-foreground",children:"Aucun historique"}):(0,r.jsx)("div",{className:"space-y-3",children:Z.map(e=>{let t=e.options.find(t=>t.id===e.resolved_option_id);return(0,r.jsxs)("div",{className:"flex items-center gap-4 rounded-2xl bg-muted/30 p-4",children:[(0,r.jsx)("div",{className:`flex h-10 w-10 shrink-0 items-center justify-center rounded-xl text-lg ${"resolved"===e.status?"bg-emerald-500/10":"bg-red-500/10"}`,children:"resolved"===e.status?"‚úÖ":"‚ùå"}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("p",{className:"font-medium text-foreground truncate",children:e.title}),(0,r.jsxs)("p",{className:"text-sm text-muted-foreground",children:["resolved"===e.status&&t?`Gagnant: ${t.name}`:"Annul√©"," ¬∑ ",v(e.created_at)]})]}),(0,r.jsxs)("div",{className:"text-right shrink-0",children:[(0,r.jsxs)("p",{className:"text-sm font-semibold",children:[g(e.totalPool)," pq"]}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground",children:[e.participantCount," joueurs"]})]})]},e.id)})})})]})]})]})]})}e.s(["default",()=>k])}]);